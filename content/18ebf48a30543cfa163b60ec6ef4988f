<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Amazon S3 PHP Class - Undesigned</title>
    <meta name="description" content="Standalone Amazon S3 REST implementation for PHP 5 using CURL, that supports large file uploads and doesn't require PEAR." />
    <link rel="stylesheet" type="text/css" href="/src/cache/screen.css" media="screen,all" />
    <link rel="alternate" type="application/rss+xml" title="undesigned.org.za" href="http://feeds.feedburner.com/undesigned" />
    <link rel="pingback" href="/wordpress/xmlrpc.php" />
    <link rel="home" href="http://undesigned.org.za/" title="Home" />
    <link rel="icon" type="image/ico" href="/favicon.ico" />
  </head>
  <body id="page-blog">
    <div id="ui-page">
      <div id="ui-head">
        <div class="framed">
          <div id="top">
            <a class="logo" href="/">
              <span>undesigned</span>
            </a>
          </div>
          <div id="ui-nav">
            <ul>
              <li>
                <a href="/" class="default">Home</a>
              </li>
              <li class="sep">/</li>
              <li>
                <a href="/blog" class="blog">Blog</a>
              </li>
              <li class="sep">/</li>
              <li>
                <a href="/about" class="about">About</a>
              </li>
              <li class="sep">/</li>
              <li>
                <a href="/contact" class="contact">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="ui-main">
        <div class="framed">
          <div class="spacer"></div>
          <div id="ui-content">
            <div class="post">
              <h1>
                <span class="title">
                  <a href="/2007/10/22/amazon-s3-php-class" rel="bookmark">Amazon S3 PHP Class</a>
                </span>
              </h1>
              <div class="spacer"> </div>
              <div style="float: right; width: 480px;">
                <div class="post-content">
                  <div>
                    <p>This class is a standalone <a href="http://aws.amazon.com/s3">Amazon S3</a> REST implementation for PHP 5.2.x (using <a href="http://php.net/curl">CURL</a>), that supports large file uploads and doesn't require PEAR.</p>
                    <p>
                      <b>Download source:</b>
                    </p>
                    <ul>
                      <li><a href="http://amazon-s3-php-class.googlecode.com/files/s3-php5-curl_0.4.0.tar.gz">Download latest version</a> (0.4.0 - 20th Jul 2009) <a rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/amazon-s3-php-class" title="Subscribe to the version update feed"><img src="/src/img/feed.png" width="14" height="14" alt="Atom feed" /></a></li>
                    </ul>
                    <p><b>Example usage</b> (also see example.php and the <a href="/2007/10/22/amazon-s3-php-class/documentation">class documentation</a>):</p>
                    <pre>
                      <code>$s3 = new S3('accessKey', 'secretKey');<br />$s3-&gt;putBucket('bucket', S3::ACL_PUBLIC_READ);<br />$s3-&gt;putObjectFile('file.doc', 'bucket', 'docs/file.doc', S3::ACL_PUBLIC_READ);<br />$s3-&gt;deleteObject('bucket', 'docs/file.doc');</code>
                    </pre>
                    <br />
                    <p>
                      <b>Writing and reading resources:</b>
                    </p>
                    <pre>
                      <code># Upload an object from a resource (requires bytesize):<br />$s3-&gt;putObject($s3-&gt;inputResource(fopen($file, 'rb'), filesize($file)), $bucketName, $uploadName, S3::ACL_PUBLIC_READ);<br /># Download an object to a resource:<br />$s3-&gt;getObject($bucketName, $uploadName, fopen($savefile, 'wb'));</code>
                    </pre>
                    <br />
                    <p>
                      <b>Known Issues:</b>
                    </p>
                    <ul>
                      <li>Files larger than 2GB are not supported on 32 bit systems due to <a href="http://bugs.php.net/bug.php?id=27792">PHP's signed integer problem</a></li>
                      <li>SSL is enabled by default and can cause problems with large files.  If you don't need SSL, disable it with S3::$useSSL = false;</li>
                    </ul>
                    <p>
                      <b>More Information:</b>
                    </p>
                    <ul>
                      <li>
                        <a href="/files/s3-class-documentation/index.html">Documentation for this class</a>
                      </li>
                      <li>
                        <a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/">Amazon S3 documentation</a>
                      </li>
                      <li>
                        <a href="http://nettuts.com/misc/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/">How to Use Amazon S3 &amp; PHP to Dynamically Store and Manage Files with Ease</a>
                      </li>
                      <li>
                        <a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1149&amp;ref=featured"> Building a Small Business Backup System Using Amazon S3</a>
                      </li>
                    </ul>
                    <p>
                      <b>Changelog</b>
                    </p>
                    <ul class="changelog">
                      <li>0.4.0 (2009-07-20):<br />Updates to copyObject, new getHttpUploadPostParams method for form uploads and fixes for 0 byte PUTs</li>
                      <li>0.3.8 (2008-12-16):<br />Support for spaces and special characters in URIs</li>
                      <li>0.3.7 (2008-11-27):<br />Support for CloudFront and changes to setBucketLogging()</li>
                      <li>0.3.6 (2008-10-23):<br />PHPDoc comment updates</li>
                      <li>0.3.5 (2008-10-08):<br />Added getAuthenticatedURL() and an ACL parameter to copyObject()</li>
                      <li>0.3.4 (2008-09-11):<br />Small updates and support for 0 byte data</li>
                      <li>0.3.3 (2008-07-30):<br />Fixed minor getBucket() bugs, added delimiter</li>
                      <li>0.3.2 (2008-07-12):<br />Fixed ?logging bug and changed putObject() to accept request headers (thanks to Angelo Mandato for providing details)</li>
                      <li>0.3.1 (2008-06-20):<br />Added copyObject() and updated README.txt</li>
                      <li>0.2.9 (2008-06-20):<br />Added getBucketLocation() and a location parameter to putBucket() for EU buckets</li>
                      <li>0.2.8 (2008-06-06):<br />Added sort() for AMZ meta headers (thanks Malone)</li>
                      <li>0.2.7 (2008-05-30):<br />Commented out uncommented var_dump() (thanks Chris)</li>
                      <li>0.2.6 (2008-05-29):<br />Replaced isset() with array_key_exists() since isset() was ignoring null parameters (thanks Joe)</li>
                      <li>0.2.5 (2008-05-29):<br />Added support for ?location and ?torrent parameters (thanks Joe)</li>
                      <li>0.2.4 (2008-05-27):<br />Fix for ?prefix bug (thanks Lucas)</li>
                      <li>0.2.3 (2008-05-04):<br />Small bug fixes, updated examples and comments, moved source to SVN</li>
                      <li>0.2.2 (2008-05-02):<br />Added S3 wrapper example</li>
                      <li>0.2.1 (2008-04-28):<br />First 0.2 beta (0.1 development discontinued)</li>
                    </ul>
                    <p>Amazon S3™ is a trademark of Amazon.com, Inc. or its affiliates.</p>
                  </div>
                </div>
              </div>
              <div style="float: left; width: 130px;">
                <p class="meta">
                  <span class="date">22 Oct 2007&#160;</span>
                  <br />
                  <span class="comments">
                    <a href="/2007/10/22/amazon-s3-php-class#comments" title="View comments for this post">207 comments
							</a>
                  </span>
                  <br />
                  <span class="leave-comment">
                    <a href="#comment">Leave a comment</a>
                  </span>
                  <span class="tags">Tags: <a href="/blog/tag/amazon-s3" rel="tag">Amazon S3</a>, <a href="/blog/tag/php" rel="tag">PHP</a></span>
                </p>
              </div>
              <div class="spacer"> </div>
            </div>
            <h3 id="comments">
              <span class="comments">270 comments</span>
            </h3>
            <ol class="comments">
              <li id="comment-3">
                <div class="author">
                  <cite>
                    <a href="http://jimhoyd.com/" rel="external nofollow" title="http://jimhoyd.com/">
                      <img src="http://www.gravatar.com/avatar/f76cb83fc1fe3dde58c83e1d818310ea?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jimmy Ho" />
                      <br />
                      <span>Jimmy Ho</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-3" title="Permanent link to this comment">30th Nov 2007</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>hi I really like your s3 php class, very clean abstracted code. Do you have any ideas on streaming? instead of put, I saw a couple different sites, with examples, like, this one, http://www.missiondata.com/blog/linux/49/s3-streaming-with-php/</p>
                    <p>Please let me know if you enhance your class to do this</p>
                  </div>
                </div>
              </li>
              <li id="comment-5" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/7ec16bd81533ed7fd32fb73d51d3999d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Scott" /><br />Scott</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-5" title="Permanent link to this comment">26th Jan 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>How would one go about uploading a folder? Apart from putObjectFile into a folder subdirectory? Is there a way to take a whole folder, its files, and subfolders at once?</p>
                  </div>
                </div>
              </li>
              <li id="comment-6">
                <div class="author">
                  <cite>
                    <a href="http://www.panoye.com/" rel="external nofollow" title="http://www.panoye.com/">
                      <img src="http://www.gravatar.com/avatar/075c73b6edc40ec4b3f0bb9bd30dd91b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="puzz" />
                      <br />
                      <span>puzz</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-6" title="Permanent link to this comment">5th Feb 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Just downloaded and looked at your source, and I like it… The example.php works perfectly. Thank you very much!</p>
                  </div>
                </div>
              </li>
              <li id="comment-7" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/822a1c4fe8553618df314a374dbed525?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Hans" /><br />Hans</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-7" title="Permanent link to this comment">7th Feb 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey! Awesome script, very useful. I miss a couple of things though:</p>
                    <p>A listBuckets function, to check which buckets exists.</p>
                    <p>A checkObject function that checks if an object with the (file)name exists, without having to get a whole object.</p>
                    <p>Maybe these things can be done allready, but I can’t see it. Thanks!</p>
                  </div>
                </div>
              </li>
              <li id="comment-8">
                <div class="author">
                  <cite>
                    <a href="http://vrillusions.com/" rel="external nofollow" title="http://vrillusions.com/">
                      <img src="http://www.gravatar.com/avatar/a62c3a5378c16611c97c2bc8e77ed954?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Todd" />
                      <br />
                      <span>Todd</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-8" title="Permanent link to this comment">15th Feb 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>thanks for the class, been trying to find one that didn’t use pear.  New function suggestion would be a getBuckets() function to get  a listing of all the buckets you have created.</p>
                  </div>
                </div>
              </li>
              <li id="comment-9" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-9" title="Permanent link to this comment">18th Feb 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Jimmy: Streaming like you mentioned probably is possible, will have a look at it sometime.</p>
                    <p>@Hans: There’s the listBuckets() function you wanted.  I’m not sure if a checkObject() could be implemented.</p>
                    <p>@Scott: You’d need to iterate through the directory uploading each file.</p>
                    <p>@Todd: Yeah, the <span class="caps">PEAR</span> requirement is what made me write this class.  listBuckets() there for you too!</p>
                    <p>Hope you all find it useful.  If you use it for something cool, drop me a line and let me know!</p>
                  </div>
                </div>
              </li>
              <li id="comment-11">
                <div class="author">
                  <cite>
                    <a href="http://vrillusions.com/" rel="external nofollow" title="http://vrillusions.com/">
                      <img src="http://www.gravatar.com/avatar/a62c3a5378c16611c97c2bc8e77ed954?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Todd" />
                      <br />
                      <span>Todd</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-11" title="Permanent link to this comment">22nd Feb 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>RE: checkObject() <br />there is a function in the api called <span class="caps">HEAD</span> that will fetch the metadata of a file. (Using Rest <span class="caps">API</span> &gt; Operations on objects &gt; <span class="caps">HEAD</span> object)  That may give you what you need as it will give a file not found error if the name doesn’t exist.</p>
                    <p>And Don, thanks for the update</p>
                  </div>
                </div>
              </li>
              <li id="comment-16" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/822a1c4fe8553618df314a374dbed525?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Hans" /><br />Hans</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-16" title="Permanent link to this comment">29th Feb 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Don: The timeouts occur with putObjectFile(). Have you tried the script on a shared hosting space? It might be something there..</p>
                    <p>Is there someway I could debug this?</p>
                    <p>Thanks for your support!</p>
                  </div>
                </div>
              </li>
              <li id="comment-25">
                <div class="author">
                  <cite>
                    <a href="http://ImageIngester.com/" rel="external nofollow" title="http://ImageIngester.com/">
                      <img src="http://www.gravatar.com/avatar/4983e2265a444174a474dc7d33bf3ead?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Marc Rochkind" />
                      <br />
                      <span>Marc Rochkind</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-25" title="Permanent link to this comment">14th Mar 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great work… lean and mean. I echo what everyone else said about the <span class="caps">PEAR</span> bloat.</p>
                    <p>But… you didn’t mention that it needed Simple <span class="caps">XML</span>. Worse, you used an @ in the call: @simplexml_load_string($data\[1\]) : $data\[1\];</p>
                    <p>(Backslashes are because your web site want to make superscripts from the array indexes.)</p>
                    <p>Result was absolute silence.</p>
                    <p>Ouch!</p>
                    <p>But, it’s such a great piece of work that I forgive you.</p>
                    <p>—Marc</p>
                  </div>
                </div>
              </li>
              <li id="comment-47" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.saveryimages.com/" rel="external nofollow" title="http://www.saveryimages.com/">
                      <img src="http://www.gravatar.com/avatar/df285f7b6e32c5458d4a60e26bb81d77?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chris Savery" />
                      <br />
                      <span>Chris Savery</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-47" title="Permanent link to this comment">7th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Don,<br />I modified your copyObject slightly to make a new setObjectInfo that allows for replacing meta data on objects without copying using x-amz-metadata-directive. This was very useful for me to fix Cache-Control headers on lots of images already uploaded. I’ve used it and it appears to work but one thing I noticed is that a new Content-Type needs to be supplied or else browsers may not respond as expected. I also added an acl parameter so that could be changed too. I added the code here but it doesn’t show well at all. Please email me and I’ll give it to you as it may be handy for others too. It was also nice for removing junk headers added by s3fox – didn’t like that stuff showing up anyway.</p>
                  </div>
                </div>
              </li>
              <li id="comment-55">
                <div class="author">
                  <cite>
                    <a href="http://raamdev.com/" rel="external nofollow" title="http://raamdev.com/">
                      <img src="http://www.gravatar.com/avatar/d3bd4d921bd93065c40cfa159a5651ce?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Raam Dev" />
                      <br />
                      <span>Raam Dev</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-55" title="Permanent link to this comment">4th May 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great work! I use this script in some of my personal projects and it works great. </p>
                    <p>One of my projects required the use of PHP4 without any <span class="caps">PEAR</span> packages and figuring out how to create <span class="caps">HMAC</span> signatures was difficult. In case anyone else needs to do this, I documented my results here:</p>
                    <p>http://blog.raamdev.com/2008/05/03/amazon-s3-hmac-signatures-without-pear-or-php5/</p>
                  </div>
                </div>
              </li>
              <li id="comment-59" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1d6a42b7b68f81afbdd6f46f8ab33840?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Edu" /><br />Edu</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-59" title="Permanent link to this comment">9th May 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Which is the best method for uploading a file from a form?</p>
                    <p>Put an object from a resource? from a file? from a string?</p>
                    <p>Thanks!</p>
                    <p>The file is uploaded first to my server using multipart form data.</p>
                  </div>
                </div>
              </li>
              <li id="comment-60">
                <div class="author">
                  <cite>
                    <a href="http://www.phinesolutions.com/" rel="external nofollow" title="http://www.phinesolutions.com/">
                      <img src="http://www.gravatar.com/avatar/a59e8658bb4aefea71fb24a46d8a13fe?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ren" />
                      <br />
                      <span>Ren</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-60" title="Permanent link to this comment">12th May 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great class. Love the putObjectFile method. I used to create an object, check for type and upload the object... this method does it all. Very well written. Thank you!!</p>
                  </div>
                </div>
              </li>
              <li id="comment-76" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/60459003eef7ad9de6f47f96a09294e1?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="SJ" /><br />SJ</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-76" title="Permanent link to this comment">4th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi, I must thank you for this because Amazon’s documentation is useless, I was up and running with this in no time. You have been a huge help!</p>
                    <p>I’m having a problem though which I was wondering if you had experienced, the script hangs when uploading very small objects, such as a 1×1 spacer gif, or a browser-dependent stylesheet with just a line or two. The file does appear in the bucket, but then it dies.</p>
                    <p>I added a <span class="caps">CURL</span> timeout which seemed sensible anyway but to no avail.</p>
                  </div>
                </div>
              </li>
              <li id="comment-79">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/76eca9a80ff02c5c8181f3e7894b6c81?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="malone" /><br />malone</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-79" title="Permanent link to this comment">6th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great class, it’s really saved me a lot of time.</p>
                    <p>But I was getting [SignatureDoesNotMatch] errors when I sent certain metadata. The docs say you have to “Sort the collection of headers lexicographically by header name” before signing them. So I added “sort($amz);” before line 791 of S3.php, and that fixed the problem.</p>
                  </div>
                </div>
              </li>
              <li id="comment-83" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-83" title="Permanent link to this comment">10th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Works beautifully, many thanks :)</p>
                    <p>How hard would it be to add in a parameter to putBucket to specify the location of the bucket?  Right now the only possibility is EU (for Europe), with US being the default if you don’t specify (or does ‘US’ work as a location?), but it doesn’t hurt to plan ahead.</p>
                    <p>I’ve only taken a cursory glance at the guts of S3 and S3Request so I’m not sure where you’d have to integrate this.  If you were using <span class="caps">PEAR</span>/HTTP_Request, you’d use the addPutData method of <span class="caps">HTTP</span>_Request to add the appropriate snippet of <span class="caps">XML</span> to the put bucket request.</p>
                    <p>I’ll look into it more tomorrow and see what I can figure out, but I thought I’d see if you know offhand.</p>
                  </div>
                </div>
              </li>
              <li id="comment-87">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-87" title="Permanent link to this comment">19th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I’ve figured out how to specify Europe as the new bucket location, so I’ll tell you what I’ve added to make it work.</p>
                    <p>First I added an array, $extradata, as another private member variable of S3Request.  Then I added a method addExtraData($data) similar in spirit to setHeader.</p>
                    <p>Next I added the following to the else statement in the ‘<span class="caps">PUT</span>’ case of the ‘request types’ switch in getResponse(), just after the <span class="caps">CURLOPT</span>_CUSTOMREQUEST line: [Sorry, the formatting doesn’t work well here.]</p>
                    <p>$strdata = ‘’;<br />foreach($extradata as $data)<br />{<br />$strdata .= $data;<br />}</p>
                    <p>if(strlen($strdata) &gt; 0)<br />{<br />$temp = tmpfile();<br />fwrite($temp, $strdata);<br />curl_setopt($curl, <span class="caps">CURLOPT</span>_INFILE, $temp);<br />curl_setopt($curl, <span class="caps">CURLOPT</span>_INFILESIZE, strlen($strdata));<br />}</p>
                    <p>Finally, I added a third parameter to S3::putBucket, $europe, which defaults to false.  Just before calling $rest-&gt;getResponse(), I do:</p>
                    <p>if($europe)<br />{<br />$data = ‘&lt;CreateBucketConfiguration&gt;\n’;<br />$data .= ‘&lt;LocationConstraint&gt;EU&lt;/LocationConstraint&gt;\n’;<br />$data .= ‘&lt;/CreateBucketConfiguration&gt;’;<br />$rest-&gt;addExtraData($data);<br />}</p>
                    <p>Next I plan on seeing whether I can make listBuckets’ detailed return indicate whether a bucket is in Europe or not.  I’ll let you know if/when I do.</p>
                    <p>Hope this helps.</p>
                  </div>
                </div>
              </li>
              <li id="comment-89" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-89" title="Permanent link to this comment">19th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>You are correct, there is unfortunately no way to get this information in listBuckets.</p>
                    <p>The changelog says the class supports the ?location and ?torrent parameters.  How do I use them?</p>
                    <p>Specifically I’m trying to figure out the location of a bucket.  The request looks like this, according to Amazon:</p>
                    <p><span class="caps">GET</span> /?location <span class="caps">HTTP</span>/1.1<br />Host: quotes.s3.amazonaws.com<br />Date: Tue, 09 Oct 2007 20:26:04 +0000<br />Authorization: <span class="caps">AWS</span> 1ATXQ3HHA59CYF1CVS02:JUtd9kkJFjbKbkP9f6T/tAxozYY=</p>
                    <p>How do I get this set up with your s3 class?  The getObjectInfo function doesn’t work, as it sends a <span class="caps">HEAD</span> request rather than a <span class="caps">GET</span> request as specified by Amazon.  I think I’ll write another function to get this information until you have a moment to show me how to do it.</p>
                  </div>
                </div>
              </li>
              <li id="comment-90">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-90" title="Permanent link to this comment">19th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Heron: I’ve added a getBucketLocation() method and a 3rd location parameter to putBucket().</p>
                    <p>But you’re right the getObjectInfo() <span class="caps">HEAD</span> request wouldn’t work for ?location.</p>
                  </div>
                </div>
              </li>
              <li id="comment-91" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-91" title="Permanent link to this comment">19th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Awesome, that’s perfect.</p>
                    <p>Maybe next (if you’re open to suggestions or requests) you could add copy and rename methods for objects.  Amazon lets you issue a <span class="caps">COPY</span> request to copy a file from one bucket+filename to another bucket+filename; that would make it easy for me to maintain European mirrors of my US data without having to upload the data twice.</p>
                    <p>You’d have to implement rename as a <span class="caps">COPY</span> (to the new file name, same bucket) and a <span class="caps">DELETE</span> (old file name).</p>
                  </div>
                </div>
              </li>
              <li id="comment-92">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-92" title="Permanent link to this comment">20th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Heron: Added copyObject() :)  Didn’t even know that was possible, thanks for the heads up!</p>
                  </div>
                </div>
              </li>
              <li id="comment-93" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-93" title="Permanent link to this comment">20th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Awesome :) I’ll try it out at work tomorrow.</p>
                  </div>
                </div>
              </li>
              <li id="comment-94">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-94" title="Permanent link to this comment">23rd Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I used copyObject to implement a ‘rename’ function in my little interface, since I don’t actually need to be able to copy objects right now.</p>
                    <p>Works like a charm :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-95" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://blog.ronnyristau.de/" rel="external nofollow" title="http://blog.ronnyristau.de/">
                      <img src="http://www.gravatar.com/avatar/d61f0c325ac4f082125693ec6d702aec?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ronny" />
                      <br />
                      <span>Ronny</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-95" title="Permanent link to this comment">24th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Nice work. Works very well. You made my day! ;]</p>
                  </div>
                </div>
              </li>
              <li id="comment-97">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-97" title="Permanent link to this comment">24th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Don,</p>
                    <p>I need to be able to modify the access permissions of an existing bucket.  Something like $s3-&gt;modifyBucketPermissions($bucket, $permission) where $permission is public, public-read, or private.  It might be useful to have a function to obtain the current permission settings for a given bucket as well.  It’ll be far faster to wait for you to add this than to move the data elsewhere, recreate the bucket, and move the data back…</p>
                    <p>Here’s the documentation link for it:</p>
                    <p>http://docs.amazonwebservices.com/AmazonS3/2006-03-01/RESTAccessPolicy.html</p>
                  </div>
                </div>
              </li>
              <li id="comment-98" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-98" title="Permanent link to this comment">24th Jun 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Heron: You can do this:</p>
                    <p>$acp = $s3-&gt;getAccessControlPolicy($bucketName);</p>
                    <p>// Here you would modify $acp</p>
                    <p>// Then update it<br />$s3-&gt;setAccessControlPolicy($bucketName, ‘’, $acp);</p>
                  </div>
                </div>
              </li>
              <li id="comment-103">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-103" title="Permanent link to this comment">6th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Cameron:</p>
                    <p>Are you uploading the file to your web server and then uploading it from there to S3, or are you uploading the file directly from your computer to S3?</p>
                    <p>@Swapnil:</p>
                    <p>$contents = $s3-&gt;getBucket($bucketName);</p>
                    <p>That will put the contents of $bucketName in $contents.  You can then loop through $contents yourself and filter out the ones you don’t want.  Read through example.php if you need to see how to use getBucket().</p>
                  </div>
                </div>
              </li>
              <li id="comment-105" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-105" title="Permanent link to this comment">7th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Ben:  You might try the getObjectInfo() function.  Pass it the bucket and uri; if it returns false, the object doesn’t exist.</p>
                    <p>E.g.:<br />if($s3-&gt;getObjectInfo($bucket, $objectname, false))<br />{ echo ‘anchor tag here’; }<br />else<br />{ echo ‘no such file’; }</p>
                    <p>The third parameter is important; you’ll get a bunch of object info instead of true/false if you don’t pass false for the third parameter.</p>
                  </div>
                </div>
              </li>
              <li id="comment-107">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-107" title="Permanent link to this comment">9th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@johan:  I ran into that same problem.  You need to urlencode the object name in the delete request.  For example:</p>
                    <p>$s3-&gt;deleteObject($bucketname, urlencode($objectname));</p>
                  </div>
                </div>
              </li>
              <li id="comment-108" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://Olive-Drab.com" rel="external nofollow" title="http://Olive-Drab.com">
                      <img src="http://www.gravatar.com/avatar/bcb0f2121a12696f31c82b8dc4a6afaf?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chuck" />
                      <br />
                      <span>Chuck</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-108" title="Permanent link to this comment">9th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Same problem as Cameron #82.  I used “S3 Firefox Organizer” to upload a bunch of test files to S3.  I can use $s3-&gt;getBucket in a test script to obtain a list of the files and related data, all OK.  But use of $s3-&gt;getObjectInfo on the same bucket and a specific object fails with “<a href="#fn72508421248754ae8011cc">505</a> Unexpected <span class="caps">HTTP</span> status” error.  The line in S3.php named is in the method code.</p>
                    <p>Thank you for this excellent module and I appreciate any help.</p>
                    <p>Chuck</p>
                  </div>
                </div>
              </li>
              <li id="comment-109">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-109" title="Permanent link to this comment">10th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Chuck: What is the name of the object you’re trying to get info on?  Does it have a space or other symbols in the name?  If so you might try using urlencode() on the object name before passing it to getObjectInfo().</p>
                  </div>
                </div>
              </li>
              <li id="comment-110" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://Olive-Drab.com" rel="external nofollow" title="http://Olive-Drab.com">
                      <img src="http://www.gravatar.com/avatar/bcb0f2121a12696f31c82b8dc4a6afaf?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chuck" />
                      <br />
                      <span>Chuck</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-110" title="Permanent link to this comment">10th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Ah, you are the man!  I used your idea to urlencode the filename and my test code now works.</p>
                    <p>Thank  you very much for the prompt and effective response.</p>
                    <p>Chuck</p>
                  </div>
                </div>
              </li>
              <li id="comment-111">
                <div class="author">
                  <cite>
                    <a href="http://angelo.mandato.com/" rel="external nofollow" title="http://angelo.mandato.com/">
                      <img src="http://www.gravatar.com/avatar/b90f2940d863e219ef05f655f6193aa8?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Angelo Mandato" />
                      <br />
                      <span>Angelo Mandato</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-111" title="Permanent link to this comment">11th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I’ve found the need to add some code to add Cache-Control header for my puts to S3. I think others would find this functionality useful as well. For my usage, I set the Cache-control so static files are not repeatedly downloaded from S3. Please let me know if/how you would like my code addition (e.g. diff,  zip of s3.php or just the function).</p>
                    <p>Thanks for a great library!</p>
                  </div>
                </div>
              </li>
              <li id="comment-112" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-112" title="Permanent link to this comment">12th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Angelo: I’ve added some changes for request headers.  Thanks for providing the info.</p>
                  </div>
                </div>
              </li>
              <li id="comment-113">
                <div class="author">
                  <cite>
                    <a href="http://www.synthasite.com/" rel="external nofollow" title="http://www.synthasite.com/">
                      <img src="http://www.gravatar.com/avatar/96e140527e91ecdfcdd8250f90a8aa1a?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Christo" />
                      <br />
                      <span>Christo</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-113" title="Permanent link to this comment">13th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I added the delimiter field in for getBucket():<br />&lt;code&gt;<br />public static function getBucket($bucket, $prefix = null, $marker = null, $maxKeys = null, $delimiter = ‘/’) </p>
                    <p>{</p>
                    <p>$rest = new S3Request(‘<span class="caps">GET</span>’, $bucket, ‘’);</p>
                    <p>if ($prefix !== null &amp;&amp; $prefix !== ‘’) $rest-&gt;setParameter(‘prefix’, $prefix);</p>
                    <p>if ($marker !== null &amp;&amp; $marker !== ‘’) $rest-&gt;setParameter(‘marker’, $marker);</p>
                    <p>if ($maxKeys !== null &amp;&amp; $maxKeys !== ‘’) $rest-&gt;setParameter(‘max-keys’, $maxKeys);</p>
                    <p>if ($delimiter !== null &amp;&amp; $delimiter !== ‘’) $rest-&gt;setParameter(‘delimiter’, $delimiter);</p>
                    <p>…<br />&lt;/code&gt;</p>
                  </div>
                </div>
              </li>
              <li id="comment-114" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://silentrant.com/" rel="external nofollow" title="http://silentrant.com/">
                      <img src="http://www.gravatar.com/avatar/8b7091a1db860fae4d52220bb5fa3993?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jed Wood" />
                      <br />
                      <span>Jed Wood</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-114" title="Permanent link to this comment">14th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Just checked out the latest version (have never used this class before) and I’m getting an error of curl_init not defined. Any ideas?</p>
                  </div>
                </div>
              </li>
              <li id="comment-115">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-115" title="Permanent link to this comment">14th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Jed: You need the <span class="caps">CURL</span> extension.</p>
                  </div>
                </div>
              </li>
              <li id="comment-116" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/31f0e1e7a0b906a5871cd9441b6eb7dd?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Memphis" /><br />Memphis</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-116" title="Permanent link to this comment">18th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Looks like it does not work with file with space in its name.<br />It says:<br />Warning: S3::copyObject(mybucket1, blz21 – 22_t.jpg, mybucket2, blz21 – 22_t.jpg): [505] Unexpected <span class="caps">HTTP</span> status in /home/username/S3.php on line 446</p>
                    <p>Is it a bug or i have to encode the file name ?</p>
                  </div>
                </div>
              </li>
              <li id="comment-117">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-117" title="Permanent link to this comment">19th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>If you’d read previous posts, Memphis, you’d know the solution: You need to urlencode the object name before sending it.</p>
                  </div>
                </div>
              </li>
              <li id="comment-118" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/31f0e1e7a0b906a5871cd9441b6eb7dd?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Memphis" /><br />Memphis</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-118" title="Permanent link to this comment">19th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks, it works well. Do you know how to use getBucket() to list a part of objects in a bucket. For example I have 10000+ objects in my bucket and I want to list  the first 1000 and then the next 1000 objects … in alphabetical order ? The $maxKeys param does not work for me in that case</p>
                  </div>
                </div>
              </li>
              <li id="comment-119">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-119" title="Permanent link to this comment">20th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Memphis: If I remember right, it gives you the files from A-Z, 0-9, then a-z in that order.  That’s not exactly alphabetical; it’s ordered by <span class="caps">ASCII</span> code.  If you want it to be in case-insensitive alphabetic order, you’ll need to grab <strong>all</strong> the keys yourself, sort them, then cache them locally before displaying them to the user.</p>
                  </div>
                </div>
              </li>
              <li id="comment-120" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1e1ceeb39866031496170d87cae919ef?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Mike" /><br />Mike</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-120" title="Permanent link to this comment">21st Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is there any chance to add curl_multi functionality so that we can send requests in parallel?</p>
                  </div>
                </div>
              </li>
              <li id="comment-121">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-121" title="Permanent link to this comment">21st Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Mike: You could.. But unfortunately that functionality will not be added anytime soon.</p>
                  </div>
                </div>
              </li>
              <li id="comment-122" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/45d3e86afaff4b0fe8d5130e4529fa90?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Randy" /><br />Randy</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-122" title="Permanent link to this comment">23rd Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>getObject method seems to be capable of writing object to a resource. but how can I make the process in which server side php requests S3 object with authentication and client user can download the object from browser?</p>
                  </div>
                </div>
              </li>
              <li id="comment-123">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-123" title="Permanent link to this comment">25th Jul 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Randy: I assume you’re asking because you’ve made your files private.  You can generate a temporary download link using this method:</p>
                    <p>http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html</p>
                    <p>Scroll down to the part labelled “Query String Request Authentication Alternative” near the bottom.  Using this method, you can give your users a controlled way to download private objects from your buckets.</p>
                    <p>This thread goes in to more detail: http://developer.amazonwebservices.com/connect/thread.jspa?messageID=71402&amp;#71402</p>
                  </div>
                </div>
              </li>
              <li id="comment-127" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f0b548cb051c1827e8e1e676028a0938?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="profes" /><br />profes</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-127" title="Permanent link to this comment">1st Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi, only small update to your S3.php class (in function inputFile), you can use <br />[ — cut — ]<br />if ( !is_readable($file) || !is_file($file) ) {<br />[ — cut — ]</p>
                    <p>instead of </p>
                    <p>[ — cut — ]<br />if (!file_exists($file) || !is_file($file) || !is_readable($file)) {<br />[ — cut — ]<br />“is_readable” will check if file really exists. <br />Cheers!</p>
                  </div>
                </div>
              </li>
              <li id="comment-128">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-128" title="Permanent link to this comment">4th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Don,</p>
                    <p>I’m having trouble getting bucket logging to work.  I have a private bucket “foobar.company.com” and another private bucket “company-access-logs”.  It is my understanding that this:</p>
                    <p>$s3-&gt;setBucketLogging(‘foobar.company.com’, ‘company-access-logs’, ‘foobar-’);</p>
                    <p>should enable logging for bucket foobar.company.com into bucket company-access-logs.  However, I get the following error:</p>
                    <p>Warning: S3::setBucketLogging(foobar.company.com, ): [InvalidTargetBucketForLogging] You must give the log-delivery group <span class="caps">WRITE</span> and <span class="caps">READ</span>_ACP permissions to the target bucket in /var/www/localhost/htdocs/s3/S3.php on line 491</p>
                    <p>Any idea what I’m doing wrong?</p>
                  </div>
                </div>
              </li>
              <li id="comment-129" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-129" title="Permanent link to this comment">4th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Solved via e-mail.  Thanks, Don :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-130">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/9c1b02e5b0bf2a08f83cb2192f63024f?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Giraldo" /><br />Giraldo</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-130" title="Permanent link to this comment">7th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>A little help on creating folders. </p>
                    <p>Just add the folder name to the file name (not the temp file name).</p>
                    <p>So it would be like:<br />$s3-&gt;putObjectFile($fileTemp, $bucketName, ‘images/’.$fileName, S3::ACL_PUBLIC_READ, array(),‘image/jpg’);</p>
                    <p>Remember to add the contentType at the end if you want to be able to view your files via the browser.</p>
                    <p>-G</p>
                  </div>
                </div>
              </li>
              <li id="comment-152" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/3ed27f86344115d93d1d4193a3eb1aaa?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="mahendra" /><br />mahendra</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-152" title="Permanent link to this comment">26th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>hi<br />i have some confusion with listBuckets() function<br />bcaz it shows the list of bucket which you had created but i have to validate new bucket name by matching all over the bucket names so how can i do that??<br />is there any reference or function for the same???</p>
                    <p>thanks in Advance</p>
                  </div>
                </div>
              </li>
              <li id="comment-153">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-153" title="Permanent link to this comment">27th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Are you asking how to tell if a given bucket name is taken globally?  You can’t, except by trying to register it.  The best you can do is test it against the list of buckets you have registered yourself – that is, the ones returned by listBuckets.</p>
                  </div>
                </div>
              </li>
              <li id="comment-154" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/3ed27f86344115d93d1d4193a3eb1aaa?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="mahendra" /><br />mahendra</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-154" title="Permanent link to this comment">28th Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>hi Heron<br />Thanks 4 replying..<br />but actually when i use to create the bucket using s3 class as fuction  putBucket ($bucketname) so what it does it just over right that bucket and updates the time of creation and no error received that bucket already exists or any error code </p>
                    <p>that’s why i am confused that why it is doing so either i am doing something wrong… or pl suggest me…</p>
                  </div>
                </div>
              </li>
              <li id="comment-155">
                <div class="author">
                  <cite>
                    <a href="http://www.norio.co.za/" rel="external nofollow" title="http://www.norio.co.za/">
                      <img src="http://www.gravatar.com/avatar/aaf9fa7b4afcb5cb04a6b92f3c3d3048?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Norio" />
                      <br />
                      <span>Norio</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-155" title="Permanent link to this comment">31st Aug 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey bro :)</p>
                    <p>Blog is coming along nicely.  Loving the tutorials!  About to code something up for my GuitarForum.co.za peeps using the S3 class.  Thanks!</p>
                  </div>
                </div>
              </li>
              <li id="comment-156" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://twitter.com/mmoney" rel="external nofollow" title="http://twitter.com/mmoney">
                      <img src="http://www.gravatar.com/avatar/8e470e4936c988ef13c762370420075d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="mmoney" />
                      <br />
                      <span>mmoney</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-156" title="Permanent link to this comment">1st Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Your S3 <span class="caps">PHP</span> Class rocks!! Love that it does not require anything more than php 5.2. and I got my work done entotale in about 5hrs today. That time does include tweaks for human readable output. <span class="caps">THANKS</span>!</p>
                  </div>
                </div>
              </li>
              <li id="comment-162">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-162" title="Permanent link to this comment">4th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Nial,</p>
                    <p>I’m not sure what <span class="caps">PHP</span>’s behavior is; however paying for bandwidth twice (uploading to your server, then uploading to Amazon) seems superfluous.  To help with this, Amazon provides a method to <span class="caps">POST</span> a file directly to your bucket, given your authorization, and then redirect to a page of your choice.  You can find more information here:</p>
                    <p>http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&amp;ref=featured</p>
                    <p>Enjoy :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-166" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1367a0bc001aff29e3ca0e5e492593d6?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="jasonmog" /><br />jasonmog</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-166" title="Permanent link to this comment">8th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>there’s a bug where sprintf blows up if there’s a % in the variable value in your sprintf calls. use %s placeholders everywhere and move the variables into the argument list</p>
                  </div>
                </div>
              </li>
              <li id="comment-167">
                <div class="author">
                  <cite>
                    <a href="http://www.conquerclub.com/" rel="external nofollow" title="http://www.conquerclub.com/">
                      <img src="http://www.gravatar.com/avatar/73ee4845eacc70d5de590274ff479fd1?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Brian" />
                      <br />
                      <span>Brian</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-167" title="Permanent link to this comment">10th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I have a lot of data to load into S3 so I did some benchmarking. I <span class="caps">PUT</span> 1000 small objects into a bucket with both classes:</p>
                    <p><span class="caps">CURL</span> version took 7.5 minutes.</p>
                    <p><span class="caps">PEAR</span> version took 4.5 minutes.</p>
                    <p>Of the 7.5 minutes, 6.5 are spent inside putObject’s $rest-&gt;getResponse() call.</p>
                    <p>I hope this will encourage you to try and optimize your class. I still plan to use it in production either way though so thanks for making it :-)</p>
                  </div>
                </div>
              </li>
              <li id="comment-168" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://chxor.chxo.com/" rel="external nofollow" title="http://chxor.chxo.com/">
                      <img src="http://www.gravatar.com/avatar/cfc32d92f1eafd2b85c3f3079407bd02?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chris Snyder" />
                      <br />
                      <span>Chris Snyder</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-168" title="Permanent link to this comment">10th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Malone, @Don Regarding empty files, there is a bug in the S3.php code. </p>
                    <p>There are two conditional statements in S3::putObject that include $input[‘size’] &gt; 0. If you replace those with $input[‘size’] &gt; -1 it works fine. </p>
                    <p>I’m not sure why the check is there in the first place, but anyway this fix will still prevent negative sizes. </p>
                    <p>Cheers!</p>
                  </div>
                </div>
              </li>
              <li id="comment-169">
                <div class="author">
                  <cite>
                    <a href="http://chxor.chxo.com/" rel="external nofollow" title="http://chxor.chxo.com/">
                      <img src="http://www.gravatar.com/avatar/cfc32d92f1eafd2b85c3f3079407bd02?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chris Snyder" />
                      <br />
                      <span>Chris Snyder</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-169" title="Permanent link to this comment">10th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Found another bug, in that <span class="caps">CURL</span> is not verifying the <span class="caps">SSL</span> certificate coming from s3.amazonaws.com. If we care enough to use <span class="caps">SSL</span>, we should definitely be checking the certificate. ;-)</p>
                    <p>Anyway, issues have been added at code.google.com for this and comment #127. </p>
                    <p>Thanks for such a useful class!</p>
                  </div>
                </div>
              </li>
              <li id="comment-170" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-170" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Chris: Regarding <span class="caps">SSL</span> verification: it is not a bug – <span class="caps">CURL</span> will spit out warnings otherwise.</p>
                  </div>
                </div>
              </li>
              <li id="comment-171">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-171" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Chris: The 0 byte check exists because I never expected people to upload empty files :)  Will change in the next update anyway.</p>
                  </div>
                </div>
              </li>
              <li id="comment-172" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-172" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Brian: Sorry to say it but this isn’t a meaningful benchmark.  Firstly, I cannot see how <span class="caps">PHP</span> code could be faster than C code.  Secondly, the <span class="caps">PEAR</span> version buffers files in memory and using <span class="caps">CURL</span> we are actually able to have optimal unbuffered read/writes.</p>
                  </div>
                </div>
              </li>
              <li id="comment-173">
                <div class="author">
                  <cite>
                    <a href="http://www.iedesign.co.uk/" rel="external nofollow" title="http://www.iedesign.co.uk/">
                      <img src="http://www.gravatar.com/avatar/2f254400181d0c30a5a6c56718166e9e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="David" />
                      <br />
                      <span>David</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-173" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Don – Brilliant class, implemented in no time at all!</p>
                    <p>Are you planning to add support for folders within buckets?</p>
                  </div>
                </div>
              </li>
              <li id="comment-174" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-174" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Don, first of all, great work. I’m using your class to back up my database to S3. Quick question, what are the advantages or disadvantages of your class versus a <span class="caps">PEAR</span> based class? The class offered by neurofuzzy.net uses two <span class="caps">PEAR</span> extensions (<span class="caps">HTTP</span>_Request and <span class="caps">HMAC</span>). Is there a speed difference? Which class is better at buffering and streaming large files? Thanks for your help. Keep up the good work.</p>
                  </div>
                </div>
              </li>
              <li id="comment-175">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-175" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Kevin: There are a number of advantages – but the fact that there are no <span class="caps">PEAR</span> dependencies is usually enough for most.  And if you are copying large files, this is the one you want to use.</p>
                  </div>
                </div>
              </li>
              <li id="comment-176" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-176" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@David: There is a way to emulate folders by using “_$folder$” – but you would have to look into it…  If you create a folder with S3Fox and retrieve a list using this class you will see how it is done.</p>
                  </div>
                </div>
              </li>
              <li id="comment-177">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-177" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Don, one more question. Are we still limited to 2GB files max? Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-178" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-178" title="Permanent link to this comment">11th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Kevin:  Yes.  See http://bugs.php.net/bug.php?id=27792 for more information.</p>
                  </div>
                </div>
              </li>
              <li id="comment-179">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-179" title="Permanent link to this comment">12th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Don, when we add a delimiter to getBucket(), do you roll up the prefix? I notice the results still have all the prefixes attached to the front of the key names. Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-180" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1f779f89fb996380a47238e568a06c68?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Sven" /><br />Sven</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-180" title="Permanent link to this comment">14th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hmm, this is not working for me. Tried it in various hosting environments and I’m still experiencing the issues outlined in comment #14: </p>
                    <p>“When I try to upload large files it will just stop after a couple minutes. It gives no error.” </p>
                    <p>Any ideas?</p>
                  </div>
                </div>
              </li>
              <li id="comment-181">
                <div class="author">
                  <cite>
                    <a href="http://www.colum.edu/" rel="external nofollow" title="http://www.colum.edu/">
                      <img src="http://www.gravatar.com/avatar/b179376b468a3ceec2beb0dd9ecbfe86?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Bryan" />
                      <br />
                      <span>Bryan</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-181" title="Permanent link to this comment">17th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Sven I’m having the same problem but only on large files.  I tried setting <span class="caps">CURLOPT</span>_TIMEOUT to a high number to no avail.</p>
                  </div>
                </div>
              </li>
              <li id="comment-182" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-182" title="Permanent link to this comment">17th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Sven and Bryan: If you’re using this class to upload from a user’s computer to an S3 bucket, you may want to consider <span class="caps">POST</span>ing directly to the S3 bucket, as explained in this article:</p>
                    <p>http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&amp;ref=featured</p>
                    <p>If, however, you’re using it to upload files from your server to S3, you’ll need to figure out what your Apache settings are and tweak them so Apache doesn’t time out.</p>
                  </div>
                </div>
              </li>
              <li id="comment-183">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/2f254400181d0c30a5a6c56718166e9e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="David" /><br />David</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-183" title="Permanent link to this comment">23rd Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@141 – The following <span class="caps">PHP</span> specific tutorial is good, and uses <span class="caps">AJAX</span> to upload files</p>
                    <p>http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1618</p>
                  </div>
                </div>
              </li>
              <li id="comment-184" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/455aa35e3286e7578896cc9db7d9ef35?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Sam" /><br />Sam</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-184" title="Permanent link to this comment">25th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I have a question similiar to Post 103.  I have a file that is private and needs to be automatically downloaded.  How is this be done with the getObject?  Or is the best way to use "Query String Request Authentication Alternative?"  Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-185">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-185" title="Permanent link to this comment">25th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Sam: You need the user’s browser to be able to download it?  You’ll want to generate a temporary <span class="caps">URL</span> giving permission to download the private file, as in this article:</p>
                    <p>http://developer.amazonwebservices.com/connect/thread.jspa?messageID=71402&amp;#71402</p>
                  </div>
                </div>
              </li>
              <li id="comment-186" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/d6a83bc058808b11c0ead037734824de?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="marek" /><br />marek</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-186" title="Permanent link to this comment">26th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I’ve got following problem – sometimes (10% probability?) when uploading to S3, my php (<span class="caps">CLI</span>, 5.2.0-8+etch11, libcurl/7.15.5 OpenSSL/0.9.8c zlib/1.2.3 libidn/0.6.5) hangs there forever eating 100% cpu. Strace shows only those two lines again and again…</p>
                    <p>poll([{fd=4, events=POLLOUT, revents=POLLHUP}], 1, 0) = 1<br />poll([{fd=4, events=POLLOUT, revents=POLLHUP}], 1, 1000) = 1</p>
                    <p>It happens in putObjectFile() uploading cca 750MB file.</p>
                    <p>Any idea what the problem might be?</p>
                  </div>
                </div>
              </li>
              <li id="comment-188">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/455aa35e3286e7578896cc9db7d9ef35?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Sam" /><br />Sam</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-188" title="Permanent link to this comment">26th Sep 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Heron:  Thanks for your help.</p>
                  </div>
                </div>
              </li>
              <li id="comment-189" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.pixelearth.net/main/" rel="external nofollow" title="http://www.pixelearth.net/main/">
                      <img src="http://www.gravatar.com/avatar/8af95d9d4020800dfc5d1c8ddf0b2798?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="pixelterra" />
                      <br />
                      <span>pixelterra</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-189" title="Permanent link to this comment">3rd Oct 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Your class didn’t allow for authenticating via query string:</p>
                    <p>&#160;&#160;&#160;&#160;<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;function getAuthenticatedUrl ($bucket, $resource, $expires_in) {</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$expires &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= time() + $expires_in;</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$string_to_sign = “<span class="caps">GET</span>\n\n\n{$expires}\n/{$bucket}/{$resource}”;</p>$signature= urlencode(base64_encode((hash_hmac(“sha1”, utf8_encode($string_to_sign), self::$__secretKey, <span class="caps">TRUE</span>))));</p>
                    <p>&#160;&#160;&#160;&#160;<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$authentication_params = “AWSAccessKeyId=” . self::$__accessKey;</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$authentication_params.= “&amp;Expires=$expires”;</p>$authentication_params.= “&amp;Signature=$signature”;</p>
                    <p>$link = “http://$bucket.s3.amazonaws.com/$resource?$authentication_params”;</p>
                    <p>&#160;&#160;&#160;&#160;<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return $link;</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//url encode this?</p>//echo “&lt;a href=\”“.htmlentities($link).”\”&gt;Authenticated Link&lt;/a&gt;”; </p>
                    <p>}</p>
                  </div>
                </div>
              </li>
              <li id="comment-190">
                <div class="author">
                  <cite>
                    <a href="http://www.exiioninfotech.com/" rel="external nofollow" title="http://www.exiioninfotech.com/">
                      <img src="http://www.gravatar.com/avatar/aa81db2633a359866dccd1c3d191b5f5?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Pushpesh" />
                      <br />
                      <span>Pushpesh</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-190" title="Permanent link to this comment">8th Oct 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Don,<br />I am using copyObject() function for copying various images within a bucket. It creates a copy of the image, but when i try to view the image, it  says “Access Denied”…Could you figure out the reason.<br />Many thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-191" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.exiioninfotech.com/" rel="external nofollow" title="http://www.exiioninfotech.com/">
                      <img src="http://www.gravatar.com/avatar/aa81db2633a359866dccd1c3d191b5f5?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Pushpesh" />
                      <br />
                      <span>Pushpesh</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-191" title="Permanent link to this comment">8th Oct 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Don,<br />In reply to my earlier query (no. 148), i have found a workaround for the stated problem. All i needed to do was to add the following :-<br />$rest-&gt;setAmzHeader(‘x-amz-acl’, self::ACL_PUBLIC_READ);<br />after the line<br />$rest-&gt;setAmzHeader(‘x-amz-copy-source’, sprintf(’/%s/%s’, $srcBucket, $srcUri));<br />in the copyObject(…) function.<br />Thanks</p>
                  </div>
                </div>
              </li>
              <li id="comment-192">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-192" title="Permanent link to this comment">8th Oct 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@pixelterra: Added getAuthenticatedURL()</p>
                    <p>@Pushpesh: Added an <span class="caps">ACL</span> parameter to copyObject()</p>
                  </div>
                </div>
              </li>
              <li id="comment-227" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://onlito.com/" rel="external nofollow" title="http://onlito.com/">
                      <img src="http://www.gravatar.com/avatar/417da4ebe698388116f7220a0ee9fbc2?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="marc breuer" />
                      <br />
                      <span>marc breuer</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-227" title="Permanent link to this comment">22nd Oct 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>great stuff, worked fine for me! have only done some simple uploading and deleting of objects, but I don’t really need more than that.</p>
                  </div>
                </div>
              </li>
              <li id="comment-230">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/6aaf16a454be3d2c80e23dd7be1c9403?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Mike" /><br />Mike</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-230" title="Permanent link to this comment">4th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I’m not sure what causes this, but when I tried the script below:<br />&lt;?php<br />include(‘S3.php’);<br />if (!defined(‘awsAccessKey’)) define(‘awsAccessKey’, ‘MyAccessKey’);<br />if (!defined(‘awsSecretKey’)) define(‘awsSecretKey’, ‘MySecretKey’);</p>
                    <p>$s3 = new S3(awsAccessKey, awsSecretKey);<br />$a = $s3-&gt;listBuckets();<br />echo “S3::listBuckets(): “.$a[ 0 ].”\n”;</p>
                    <p>define(‘<span class="caps">BUCKET</span>’,$a[ 0 ]);<br />$RESPONSE = $s3-&gt;getBucket(<span class="caps">BUCKET</span>);<br />?&gt;</p>
                    <p>it outputs as:<br />S3::listBuckets(): [My_Correct_Bucket_Name]<br />Warning: S3::getBucket(): [NoSuchBucket] The specified bucket does not exist in …./s3/S3.php on line 134</p>
                    <p>Something with my script, or with my S3 account? Thanks</p>
                    <p>*I have to add spaces in $a[ 0 ] to avoid autolink</p>
                  </div>
                </div>
              </li>
              <li id="comment-231" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-231" title="Permanent link to this comment">5th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Mike: You’ll want to make sure there are no extraneous newlines or anything in $a[ 0 ].  Also, does it work if you do $s3-&gt;getBucket(‘putbucketnamehere’); manually?</p>
                  </div>
                </div>
              </li>
              <li id="comment-232">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Joao Pinto" /><br />Joao Pinto</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-232" title="Permanent link to this comment">6th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Dear Don Schonknecht,</p>
                    <p>Congratulations for S3.php file. Great job!<br />However this class doesn’t allow list of objects based on queries, because you have an error on your S3Request class, but I already fixed it.<br />Basically you weren’t parsing the uri’s “querystring” on the “StringToSign” (the “resource” variable) on the S3Request class.<br />If you check the <span class="caps">AWS</span>-S3 tutorial, it says when you have a querystring on the uri, the StringToSign only should contains the bucket and the request_uri. This means you should only append, to the StringToSign, the path part of the un-decoded <span class="caps">HTTP</span> Request-<span class="caps">URI</span>, up-to but not including the query string.<br />For more information see the 3rd example of the http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html url.</p>
                    <p>Like I told you before, I already fixed this bug.<br />Basically I added/changed the following lines on the S3Request constructor function:</p>
                    <p>$resource_uri = strpos($this-&gt;uri, “?”) &gt; 0 ? substr($this-&gt;uri, 0, strpos($this-&gt;uri, “?”)): $this-&gt;uri;</p>
                    <p>if ($this-&gt;bucket !== ‘’) {</p>
                    <p>$this-&gt;resource = ‘/’.$this-&gt;bucket.$resource_uri;</p>
                    <p>$this-&gt;headers[‘Host’] = $this-&gt;bucket.’.s3.amazonaws.com’;</p>
                    <p>} else {</p>
                    <p>$this-&gt;headers[‘Host’] = ‘s3.amazonaws.com’;</p>
                    <p>$this-&gt;resource = strlen($this-&gt;uri) &gt; 1 ? ‘/’.$this-&gt;bucket.$resource_uri : $resource_uri;</p>
                    <p>}</p>
                    <p>This means the S3Request constructor has now the following code:</p>
                    <p>function __construct($verb, $bucket = ‘’, $uri = ‘’) {</p>
                    <p>$this-&gt;verb = $verb;</p>
                    <p>$this-&gt;bucket = strtolower($bucket);</p>
                    <p>$this-&gt;uri = $uri !== ‘’ ? ‘/’.$uri : ‘/’;</p>
                    <p>$resource_uri = strpos($this-&gt;uri, “?”) &gt; 0 ? substr($this-&gt;uri, 0, strpos($this-&gt;uri, “?”)): $this-&gt;uri;</p>
                    <p>if ($this-&gt;bucket !== ‘’) {</p>
                    <p>$this-&gt;resource = ‘/’.$this-&gt;bucket.$resource_uri;</p>
                    <p>$this-&gt;headers[‘Host’] = $this-&gt;bucket.’.s3.amazonaws.com’;</p>
                    <p>} else {</p>
                    <p>$this-&gt;headers[‘Host’] = ‘s3.amazonaws.com’;</p>
                    <p>$this-&gt;resource = strlen($this-&gt;uri) &gt; 1 ? ‘/’.$this-&gt;bucket.$resource_uri : $resource_uri;</p>
                    <p>}</p>
                    <p>$this-&gt;headers[‘Date’] = gmdate(‘D, d M Y H:i:s T’);</p>
                    <p>$this-&gt;response = new <span class="caps">STDC</span>lass;</p>
                    <p>$this-&gt;response-&gt;error = false;</p>
                    <p>}</p>
                    <p>If you have any other question, don’t hesitate to email me to a19836@gmail.com.</p>
                    <p>Sincerely,<br />Joao Pinto</p>
                  </div>
                </div>
              </li>
              <li id="comment-233" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Joao Pinto" /><br />Joao Pinto</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-233" title="Permanent link to this comment">6th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Dear S3 Owners,</p>
                    <p>I’m changing the S3 class functions, to return a list of objects and a list of Objects Info, if the uri contains a query string.<br />I will send you the new code to your email or post it here, when will be ready.<br />Can you send me your email to a19836@gmail.com, please?</p>
                    <p>Regards,<br />Joao Pinto</p>
                  </div>
                </div>
              </li>
              <li id="comment-234">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-234" title="Permanent link to this comment">19th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Any chance you might support Cloudfront in the future?</p>
                  </div>
                </div>
              </li>
              <li id="comment-235" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://james.cridland.net/" rel="external nofollow" title="http://james.cridland.net/">
                      <img src="http://www.gravatar.com/avatar/e5c550f1d414e90c3dea32f2630e258e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="James Cridland" />
                      <br />
                      <span>James Cridland</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-235" title="Permanent link to this comment">20th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Setting metadata headers isn’t quite working… I’m using…</p>
                    <p>$metaHeaders[‘Content-Type’]=‘image/png’;</p>
                    <p>…and then including $metaHeaders in the putObject instruction.</p>
                    <p>I’m getting back:</p>
                    <p>x-amz-meta-content-type: image/png<br />Content-Type: application/octet-stream</p>
                    <p>What am I doing wrong?</p>
                  </div>
                </div>
              </li>
              <li id="comment-236">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-236" title="Permanent link to this comment">20th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Kevin: Written some code for CloudFront – it will most likely appear in the next release.</p>
                    <p>@James Cridland: The $metaHeaders are the x-amz-meta-* headers.  What you need to do is use $requestHeaders[‘Content-Type’] = ‘image/png’</p>
                  </div>
                </div>
              </li>
              <li id="comment-237" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://james.cridland.net/" rel="external nofollow" title="http://james.cridland.net/">
                      <img src="http://www.gravatar.com/avatar/e5c550f1d414e90c3dea32f2630e258e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="James Cridland" />
                      <br />
                      <span>James Cridland</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-237" title="Permanent link to this comment">20th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Closer, but still no dice. Now using putObjectFile – Content-Type works fine (as a part of the call), but</p>
                    <p>$requestHeaders[‘Cache-Control’]=‘max-age=315360000’;</p>
                    <p>… doesn’t really do the job, returning</p>
                    <p>x-amz-meta-cache-control: max-age=315360000</p>
                    <p>I could really do with setting the cache-control properly…</p>
                  </div>
                </div>
              </li>
              <li id="comment-238">
                <div class="author">
                  <cite>
                    <a href="http://james.cridland.net/" rel="external nofollow" title="http://james.cridland.net/">
                      <img src="http://www.gravatar.com/avatar/e5c550f1d414e90c3dea32f2630e258e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="James Cridland" />
                      <br />
                      <span>James Cridland</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-238" title="Permanent link to this comment">20th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>OK, worked a workaround.<br />$requestHeaders[‘Cache-Control’]=‘max-age=315360000’;<br />$requestHeaders[‘Content-Type’]=‘image/png’;</p>
                    <p>$transfer-&gt;putObject($transfer-&gt;inputResource(fopen($file, ‘rb’), filesize($file)), $bucketname, $object_name, S3::ACL_PUBLIC_READ, array(), $requestHeaders)</p>
                    <p>That works, though not using putObjectFile. But it works. So. Good. ;)</p>
                    <p>(That sets a ten-year cache on that image, btw.)</p>
                  </div>
                </div>
              </li>
              <li id="comment-239" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://chxor.chxo.com/" rel="external nofollow" title="http://chxor.chxo.com/">
                      <img src="http://www.gravatar.com/avatar/cfc32d92f1eafd2b85c3f3079407bd02?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chris Snyder" />
                      <br />
                      <span>Chris Snyder</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-239" title="Permanent link to this comment">27th Nov 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey, CloudFront support already, nice! Didn’t there used to be a PayPal link around here somewhere? <br />Well anyway, thanks for keeping up with the latest and continuing to improve the class.</p>
                  </div>
                </div>
              </li>
              <li id="comment-240">
                <div class="author">
                  <cite>
                    <a href="http://24b6.net/" rel="external nofollow" title="http://24b6.net/">
                      <img src="http://www.gravatar.com/avatar/33c2a29a936466503b218c5f18d492f7?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="arthur" />
                      <br />
                      <span>arthur</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-240" title="Permanent link to this comment">2nd Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Question about licensing- I’ve create a Drupal module that uses S3 as a storage option (http://drupal.org/project/media_mover) and currently uses a different S3 library which does not use curl. I’m interested in using your library, but to include it in Drupal’s <span class="caps">CVS</span> repository, it would have to be under the <span class="caps">GPL</span>. Would you consider releasing it under the <span class="caps">GPL</span> as well?</p>
                    <p>Thanks so much</p>
                  </div>
                </div>
              </li>
              <li id="comment-241" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-241" title="Permanent link to this comment">2nd Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Arthur, this S3 class is released under something like the <span class="caps">BSD</span> license (which is more permissive than the <span class="caps">GPL</span>).  I’m not a lawyer but I don’t think there’s a problem with using the S3 class in conjunction with <span class="caps">GPL</span>’ed code, as long as you retain the license information given in the S3.php file and maintain a clear separation between your code and the S3 class.</p>
                  </div>
                </div>
              </li>
              <li id="comment-242">
                <div class="author">
                  <cite>
                    <a href="http://24b6.net/" rel="external nofollow" title="http://24b6.net/">
                      <img src="http://www.gravatar.com/avatar/33c2a29a936466503b218c5f18d492f7?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="arthur" />
                      <br />
                      <span>arthur</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-242" title="Permanent link to this comment">4th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Heron- unfortunately, the rules for the Drupal <span class="caps">CVS</span> repository are strict as far as I know- <span class="caps">GPL</span> or include a link to a location where the user can download the file. My preferences is obviously to include the class in the repository which is why I’m asking. I’m not a lawyer either, but I do know that every time the <span class="caps">MIT</span>/BSD/GPL thing comes up people seem to loose their minds which is why I’m trying to ask nicely :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-243" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-243" title="Permanent link to this comment">5th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Have any of you tried changing the access control policy of objects in S3? I’m trying to add AllUsers <span class="caps">READ</span> access but it doesn’t seem to be saving the changes properly.</p>
                    <p>First I use getAccessControlPolicy on the object to get $acp, then I add:</p>
                    <p>$acp[“acl”][] = array(“type” =&gt; “Group”, “uri” =&gt; “http://acs.amazonaws.com/groups/global/AllUsers”, “permission” =&gt; “<span class="caps">READ</span>”);</p>
                    <p>Then I set it back using setAccessControlPolicy but it doesn’t seem to be storing the change.</p>
                    <p>Thanks</p>
                  </div>
                </div>
              </li>
              <li id="comment-244">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-244" title="Permanent link to this comment">5th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Oops I apologize. I figured out the problem. Sorry, I wish I could delete the last comment. Thanks again for your work Don!</p>
                  </div>
                </div>
              </li>
              <li id="comment-245" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://bigornot-fr.blogspot.com" rel="external nofollow" title="http://bigornot-fr.blogspot.com">
                      <img src="http://www.gravatar.com/avatar/3f9afad5b670400113fe7223cbefd339?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Mat" />
                      <br />
                      <span>Mat</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-245" title="Permanent link to this comment">17th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks <em>a lot</em> for this class ! It’s clean and very helpfull :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-246">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/40690ca147b6fda7a1dc3a2640bc2f4b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="david" /><br />david</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-246" title="Permanent link to this comment">17th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Nice class. Just wanted to let everyone know about a problem I ran into using this. I was getting [NotSignedUp] Your account is not signed up for the S3 service. You must sign up before you can use S3. <br />I am running on a Windows machine and it is apparently an issue with the <span class="caps">SSL</span> cert on Amazon and my windows box. I’ve turned off <span class="caps">SSL</span> for now and will go back and investigate when I get everything else working. Just didn’t want anyone else to bang their head against a wall on this one.</p>
                  </div>
                </div>
              </li>
              <li id="comment-248" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/96004e3a70869037cd8758f7fa9d9131?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Sune Kibsgaard Pedersen" /><br />Sune Kibsgaard Pedersen</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-248" title="Permanent link to this comment">22nd Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great class, very well written.</p>
                    <p>It would be nice if it was possible to get the CommonPrefixes out when doing getBucket() with a delimiter</p>
                  </div>
                </div>
              </li>
              <li id="comment-249">
                <div class="author">
                  <cite>
                    <a href="http://code.google.com/p/awss3filemanager/" rel="external nofollow" title="http://code.google.com/p/awss3filemanager/">
                      <img src="http://www.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Joao Pinto" />
                      <br />
                      <span>Joao Pinto</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-249" title="Permanent link to this comment">22nd Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey guys,</p>
                    <p>I created a new Google project with a file manager to the Amazon S3 service. <br />Please visit the following page: http://code.google.com/p/awss3filemanager/.</p>
                    <p>I’m searching coders to help me improving this amazon file manager project.</p>
                    <p>Sincerely, <br />Joao Pinto</p>
                  </div>
                </div>
              </li>
              <li id="comment-250" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://unsharptech.com/" rel="external nofollow" title="http://unsharptech.com/">
                      <img src="http://www.gravatar.com/avatar/2f3dc5573a418990fb5978cc42dc7685?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="sam" />
                      <br />
                      <span>sam</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-250" title="Permanent link to this comment">29th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Maybe I am miss-using the function, but for putObject(), if you pass an empty value or false for $metaHeaders there is no error checking so on line # 349 you get an error when it tries to run a foreach on $metaHeaders.</p>
                    <p>Is this by design, am I supposed to pass a different (empty) value when I don’t have any metaHeaders but do have requestHeaders?</p>
                    <p>Example: <br />$s3-&gt;putObjectFile($filePath, $bucketName, $fileName, S3::ACL_PUBLIC_READ, ‘’, $requestHeadersArray);</p>
                    <p>Using version 0.3.9</p>
                    <p><span class="caps">BTW</span>, thank you very much for creating this class, it’s been very useful!</p>
                  </div>
                </div>
              </li>
              <li id="comment-251">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-251" title="Permanent link to this comment">30th Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Sam,</p>
                    <p>If you pass array() as that parameter, you should be fine.  For example:</p>
                    <p>$s3-&gt;putObjectFile($filePath, $bucketName, $fileName, S3::ACL_PUBLIC_READ, array(), $requestHeadersArray);</p>
                    <p>That way foreach will accept the parameter as valid but will do nothing since the array is empty.</p>
                  </div>
                </div>
              </li>
              <li id="comment-252" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/2b5d35a7063ab3a48bf869ff6df3bd38?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Lint Filter" /><br />Lint Filter</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-252" title="Permanent link to this comment">31st Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Wow S3 isn’t too frustrating…  I appreciate you making this class. I’m very surprised Amazon didn’t make this already though.</p>
                  </div>
                </div>
              </li>
              <li id="comment-253">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-253" title="Permanent link to this comment">31st Dec 2008</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Lint Filter,</p>
                    <p>Amazon made the <span class="caps">REST</span> <span class="caps">API</span> (and the <span class="caps">SOAP</span> <span class="caps">API</span>), and they also provided examples of those <span class="caps">API</span>s being used in various languages.  Trouble is, their example implementations are fairly basic and not particularly general-purpose.  That’s where Don’s S3 class comes in :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-254" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.jplpinto.com/" rel="external nofollow" title="http://www.jplpinto.com/">
                      <img src="http://www.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Joao Pinto" />
                      <br />
                      <span>Joao Pinto</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-254" title="Permanent link to this comment">3rd Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey guys,</p>
                    <p>I found out a bug on the S3 class,in the putObjectString function.<br />Basically if you try to create an object through the putObjectString function with a numeric input, the S3 class returns a php error.<br />So the putObjectString function should resolve these kind of issues.<br />I propose the following:</p>
                    <p>&#160;&#160;&#160;&#160;<p>public static function putObjectString($string, $bucket, $uri, $acl = self::ACL_PRIVATE, $metaHeaders = array(), $contentType = ‘text/plain’) {</p><p>&#160;&#160;&#160;&#160;if(!is_string($string)) {</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (is_object($string) &amp;&amp; in_array(”__toString”, get_class_methods($string)))</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$string = strval($string-&gt;__toString());</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$string = strval($string);</p><p>&#160;&#160;&#160;&#160;}</p>return self::putObject($string, $bucket, $uri, $acl, $metaHeaders, $contentType);<br />}</p>
                  </div>
                </div>
              </li>
              <li id="comment-255">
                <div class="author">
                  <cite>
                    <a href="http://traviscooper.com/" rel="external nofollow" title="http://traviscooper.com/">
                      <img src="http://www.gravatar.com/avatar/44ea39dcebd6c85f0114e55d7d02e488?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Travis Cooper" />
                      <br />
                      <span>Travis Cooper</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-255" title="Permanent link to this comment">6th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey guys. I've got a problem.  I read in other comments about making the file private and wanting to control access to the file when downloading.  I don't want to do the temp url thing, I'm not sure if that is secure enough (maybe it is, if so I'd like to know why ;) ) but instead, I'd like to use the getObject method to grab the file information and put that into somesort of php file object and then do the file output where you create the File headers, then do a readfile($filename); and it send it to the browser.</p>
                    <p>I could potentially just save the file down to the hard disk, and server it up, then delete it once it's been downloaded, but that may prove inefficient.  I'd like to just have it load in memory, never touch the hard disk, and load right into a php file object and then pump that out to the page (espically for images etc.)</p>
                    <p>Any thoughts?  I'd like to use the direct link to the file on amazon, i just want to make sure i can control access to the file.</p>
                    <p>Thanks in advance!</p>
                  </div>
                </div>
              </li>
              <li id="comment-256" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-256" title="Permanent link to this comment">7th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Travis,</p>
                    <p>A generated temporary <span class="caps">URL</span> is about as secure as it gets.  You set the expiration time; I would suggest setting an expiration two or three minutes in the future.  Yes, the <span class="caps">URL</span> works for anyone, but only during that two minute window, and if your user wants to share the file they could just do it after downloading it anyway.</p>
                    <p>The best option is to control whether or not you provide the signed <span class="caps">URL</span> in the first place;  for example, I put the full version of my software in a bucket, and provide a signed temporary download <span class="caps">URL</span> for the user when they’re logged in to my website.  That is, they only get the <span class="caps">URL</span> once I’ve already verified who they are, and even then the download <span class="caps">URL</span> is only valid for a few minutes.  I can’t stop them from throwing the program up on BitTorrent or something, but that’s an impossible dream anyway.</p>
                    <p>I’d recommend against downloading the file to your server and then serving it to the user; you lose one of the best benefits of using S3 (which is that Amazon’s pipe is bigger than yours).</p>
                  </div>
                </div>
              </li>
              <li id="comment-257">
                <div class="author">
                  <cite>
                    <a href="http://jason.solidblog.com/" rel="external nofollow" title="http://jason.solidblog.com/">
                      <img src="http://www.gravatar.com/avatar/aca1dea58128c414073b484451c49db1?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jason" />
                      <br />
                      <span>Jason</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-257" title="Permanent link to this comment">12th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>No worky.</p>
                    <p>I hate the fact that I am posting here with problems but I just can't make it work.</p>
                    <p>I get "Warning: Invalid argument supplied for foreach() in /srv/www/htdocs/upload/page.php on line 49"</p>
                    <p>Which isn't a big deal. The main problem is that whenever I try to upload an image (tried many file types including jpg, jpeg, gif, etc) I get "Something went wrong while uploading your file... sorry." With no direction as to where I went wrong.</p>
                    <p>I tried creating a new bucket by hand and using it, I even tried letting it create one. It's not the bucket name cause as soon as it fails I can go and create one with the same name. There is no real error reporting with this class to help me figure it out so I have to post here.</p>
                    <p>Any help/guidance would be greatly appreciated.</p>
                  </div>
                </div>
              </li>
              <li id="comment-258" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-258" title="Permanent link to this comment">15th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Jason,</p>
                    <p>If you e-mail me your code for page.php (be sure to remove your <span class="caps">AWS</span> keys!) I may be able to help you figure out what’s going on.</p>
                    <p>heron@xnapid.com</p>
                    <p>- Heron</p>
                  </div>
                </div>
              </li>
              <li id="comment-259">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/cd31311ce9afac4fe2dd7ed8795b9d9c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="sharad" /><br />sharad</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-259" title="Permanent link to this comment">25th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Used the library for the first time today. Really easy to use. I have two questions/comments</p>
                    <p>a) I assume it the caller’s reponsibility to retry if an InternalError is returned.</p>
                    <p>b) I did a putBucket on the same bucket multiple times today. They all indicated success. Should’nt I be getting a BucketAlreadyOwnedByYou ?</p>
                    <p>Thanks</p>
                  </div>
                </div>
              </li>
              <li id="comment-260" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.apez.biz/" rel="external nofollow" title="http://www.apez.biz/">
                      <img src="http://www.gravatar.com/avatar/531a93a176df5bde70902adaeeeb8eb2?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="David J" />
                      <br />
                      <span>David J</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-260" title="Permanent link to this comment">26th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Anyone know what might cause this?:</p>
                    <p><span class="caps">PHP</span> Warning:  S3::putObject(): [MalformedXML] The <span class="caps">XML</span> you provided was not well-formed or did not validate against our published schema in includes/S3.php on line 357</p>
                    <p>I can list buckets ok, but putObject with a string for the input parameter generates that (and doesn’t work).</p>
                    <p>Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-261">
                <div class="author">
                  <cite>
                    <a href="http://www.apez.biz/" rel="external nofollow" title="http://www.apez.biz/">
                      <img src="http://www.gravatar.com/avatar/531a93a176df5bde70902adaeeeb8eb2?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="David J" />
                      <br />
                      <span>David J</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-261" title="Permanent link to this comment">26th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@David J – to answer myself :)</p>
                    <p>It occurs when the bucket is the empty string.</p>
                  </div>
                </div>
              </li>
              <li id="comment-262" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://angelo.mandato.com/" rel="external nofollow" title="http://angelo.mandato.com/">
                      <img src="http://www.gravatar.com/avatar/b90f2940d863e219ef05f655f6193aa8?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Angelo Mandato" />
                      <br />
                      <span>Angelo Mandato</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-262" title="Permanent link to this comment">30th Jan 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I love this class, but I recently ran into an issue with a server that does not have any certificates installed. For situations like these, I’d like to see one or more of the suggested solutions added…</p>
                    <p>1: allow the user to specify a define to turn off <span class="caps">CURLOPT</span>_SSL_VERIFYPEER. e.g.</p>
                    <p>curl_setopt($curl, <span class="caps">CURLOPT</span>_SSL_VERIFYHOST, 1);<br /><p>if( defined(‘S3_CLASS_SSL_VERIFYPEER’) )</p>curl_setopt($curl, <span class="caps">CURLOPT</span>_SSL_VERIFYPEER, S3_CLASS_SSL_VERIFYPEER);<br /><p>else</p>curl_setopt($curl, <span class="caps">CURLOPT</span>_SSL_VERIFYPEER, 1);</p>
                    <p>Then all a developer needs to do is add the following line to their code before using the S3 class:<br />define(‘S3_CLASS_SSL_VERIFYHOST’, 0);</p>
                    <p>2 and 3: Another option(s) would be to allow us to define the path for <span class="caps">CURLOPT</span>_CAINFO and/or <span class="caps">CURLOPT</span>_CAPATH so we can specify the .crt files.</p>
                    <p>Thanks again for a great S3 class!</p>
                  </div>
                </div>
              </li>
              <li id="comment-263">
                <div class="author">
                  <cite>
                    <a href="http://www.RADMoose.com/" rel="external nofollow" title="http://www.RADMoose.com/">
                      <img src="http://www.gravatar.com/avatar/3eb4787adc442c68eb8f591af04c1023?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="R. Moose" />
                      <br />
                      <span>R. Moose</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-263" title="Permanent link to this comment">1st Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is there any way to use this class but somehow ‘encrypt’ or ‘sign’ an access key so that if the code gets taken, I can disable the access key only for this script?</p>
                    <p>The problem is that our site has multiple developers working on it and I really don’t want to just hand out the keys for everyone to have access to.</p>
                  </div>
                </div>
              </li>
              <li id="comment-264" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-264" title="Permanent link to this comment">2nd Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@ R. Moose:</p>
                    <p>Unfortunately no, there is no way to do that.  If the key gets taken, you’ll simply have to generate a new keypair from your <span class="caps">AWS</span> account.</p>
                    <p>One solution, would be to create a web service with your own authentication mechanism that does the interaction with S3 itself.</p>
                    <p>However, there is a larger problem here.  If you don’t trust your developers with your access key, why do you trust them to write the code in the first place?  Being able to revoke an access key won’t prevent them from (for example) deleting the contents of your buckets, sabotaging your code, etc etc.  I’d recommend hiring trustworthy developers ;)</p>
                    <p>Non-disclosure agreements can cover this type of thing, giving you legal grounds to sue them into oblivion to recover your costs if they use such secrets to damage your company.  It also doesn’t hurt to change your access keys whenever a developer leaves the company.</p>
                  </div>
                </div>
              </li>
              <li id="comment-265">
                <div class="author">
                  <cite>
                    <a href="http://espeakers.com/" rel="external nofollow" title="http://espeakers.com/">
                      <img src="http://www.gravatar.com/avatar/8abe6a72502a6f55a2a395dab45bca59?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Dave" />
                      <br />
                      <span>Dave</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-265" title="Permanent link to this comment">10th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks for some great work — nice to use well-done code.</p>
                  </div>
                </div>
              </li>
              <li id="comment-266" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1d31e4d4920704e248c4394ae24cb2a7?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ricky de Jong" /><br />Ricky de Jong</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-266" title="Permanent link to this comment">10th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great class!<br />Congrats! :D</p>
                    <p>I’m, sort of, disliking echoing ‘$s3-&gt;getAuthenticatedURL’ but that’s me.</p>
                    <p>But talking about the expire time. Let’s say it’s set to 2 minutes. Does that mean if you download a file that would take 3 minutes to download, you will get an error after 2 minutes because of lacking access to s3?</p>
                    <p>Cheers!</p>
                  </div>
                </div>
              </li>
              <li id="comment-267">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-267" title="Permanent link to this comment">11th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Ricky:</p>
                    <p>No, the download will continue as normal.  The expiration time is for the <strong>start</strong> of the download (that is, for the moment when the link is clicked).</p>
                  </div>
                </div>
              </li>
              <li id="comment-268" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-268" title="Permanent link to this comment">11th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Ricky: With regards to getAuthenticatedURL(), see what Heron said above.</p>
                    <p>What you want to do is create a link with getAuthenticatedURL() as the user clicks, so: /download/fileId redirects to the getAuthenticatedURL() link.  This way the link is always valid.</p>
                  </div>
                </div>
              </li>
              <li id="comment-269">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1d31e4d4920704e248c4394ae24cb2a7?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ricky de Jong" /><br />Ricky de Jong</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-269" title="Permanent link to this comment">11th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks for your quick reply, Don and Heron :)</p>
                    <p>Greets</p>
                  </div>
                </div>
              </li>
              <li id="comment-270" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1d31e4d4920704e248c4394ae24cb2a7?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ricky de Jong" /><br />Ricky de Jong</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-270" title="Permanent link to this comment">11th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Heron</p>
                    <p>Just a small note: the expiration time for the getAuthenticatedURL is when it’s been generated and not when you click on it :D</p>
                  </div>
                </div>
              </li>
              <li id="comment-271">
                <div class="author">
                  <cite>
                    <a href="http://www.moviestorm.co.uk/" rel="external nofollow" title="http://www.moviestorm.co.uk/">
                      <img src="http://www.gravatar.com/avatar/22ade7e3b5ff9d68220814352347ccb3?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ben Garrett" />
                      <br />
                      <span>Ben Garrett</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-271" title="Permanent link to this comment">11th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi,</p>
                    <p>Firstly, many thanks for the class – it’s just what I was looking for.</p>
                    <p>Unfortunately I’m getting the same timeout errors mentioned by others in earlier posts, when calling putObjectFile. The timeout occurs trying to put a small file (less than 3k), and it’s the second putObjectFile on the same S3 object – the first call works perfectly. Any ideas?</p>
                    <p>Thanks!</p>
                  </div>
                </div>
              </li>
              <li id="comment-272" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-272" title="Permanent link to this comment">11th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Ricky:</p>
                    <p>What I meant was, the expiration date determines the range of time during which the link may be clicked on.  If the link is clicked outside of that time frame, it is invalid.</p>
                    <p>So, the link may be clicked on (or visited in some other way) at any time between the moment it is generated and the expiration time.</p>
                  </div>
                </div>
              </li>
              <li id="comment-273">
                <div class="author">
                  <cite>
                    <a href="http://cloversites.com/" rel="external nofollow" title="http://cloversites.com/">
                      <img src="http://www.gravatar.com/avatar/28ddfabff29c92b1bb384a57915fe640?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kirby" />
                      <br />
                      <span>Kirby</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-273" title="Permanent link to this comment">13th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>First, awesome resource!  Currently, I am creating a class which takes a bucket of files and matches it with its backup bucket.  If the file is not there in the backup, then it copies and pastes it in the backup bucket.  Just a simple backup program between two buckets in one S3 account.</p>
                    <p>I am running into a problem. The getbucket function is not grabbing all of the files in the first bucket(we have a ton).  Any idea of whats going on?  Is it the <span class="caps">PHP</span> function’s fault?  Is there a limit of how many files one can grab from a bucket?</p>
                  </div>
                </div>
              </li>
              <li id="comment-274" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/5bf2fcc7b1a4fa0aff918a0787799911?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jonathan" /><br />Jonathan</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-274" title="Permanent link to this comment">13th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I’m getting the timeout too, but only on the second file upload. What I’m doing is:<br />1.) putObjectFile to upload (/tmp/temp.jpg)<br />2.) resize image to make thumbnail to the same file (/tmp/temp.jpg)<br />3.) putObjectFile to upload thumbnail (/tmp/temp.jpg)</p>
                    <p>If during the resize I create a new file (/tmp/temp2.jpg) then it works fine.</p>
                  </div>
                </div>
              </li>
              <li id="comment-275">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-275" title="Permanent link to this comment">13th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Ben, @Jonathan: Think there is an issue with resources being locked/not cleaned up.</p>
                    <p>@Kirby: Will look into it.</p>
                  </div>
                </div>
              </li>
              <li id="comment-276" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-276" title="Permanent link to this comment">14th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Isn’t there a “paging” sort of thing going on when you list the contents of a bucket?  That is, I was under the impression that listing the bucket contents can only happen a thousand objects at a time.</p>
                  </div>
                </div>
              </li>
              <li id="comment-277">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/a829c40d371dae946cc57c0a20479fbc?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-277" title="Permanent link to this comment">16th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Love the code, however updated to 0.3.9 and it seems to still have issues with files of 0 bytes.  I keep getting the Missing input parameters error.  I see this was mentioned before in the comments, is this still in the todo’s?</p>
                    <p>Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-278" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-278" title="Permanent link to this comment">16th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Kevin,</p>
                    <p>After fiddling with 0.3.9’s source for a while, I’m still finding that the only way to put a 0-byte file onto S3 is by <span class="caps">POST</span>ing directly to S3 (via an <span class="caps">HTTP</span> <span class="caps">POST</span>, that is), as described here:</p>
                    <p>http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&amp;ref=featured</p>
                    <p>It’s worth noting that it’s not just 0.3.9 that has this issue with 0-byte files; the S3Fox Firefox extension won’t let you upload 0-byte files either.</p>
                  </div>
                </div>
              </li>
              <li id="comment-279">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-279" title="Permanent link to this comment">17th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Kevin: With regards to 0 byte files, you can get around it by setting $requestHeaders[‘Content-Length’] = 0; when using putObject().</p>
                  </div>
                </div>
              </li>
              <li id="comment-280" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-280" title="Permanent link to this comment">17th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Kirby: I had a look into this and could not reproduce your problem.  I’m inclined to think your problem is related to a memory limit or perhaps even a bug in your <span class="caps">PHP</span> or libcurl versions.</p>
                  </div>
                </div>
              </li>
              <li id="comment-281">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/a829c40d371dae946cc57c0a20479fbc?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-281" title="Permanent link to this comment">17th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I wasn’t able to get the $requestHeaders[‘Content-Length’] = 0; to work, it then just gave me another error which I don’t have in front of me, something about the method has not been implemented or something.  But I’m managing my files database locally so I’m able to adjust my logic to make everything work fine.  Thanks for doing the S3 integration for me.  :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-282" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b77d50071696d1854fb28d1182667168?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Lionel Morrison" /><br />Lionel Morrison</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-282" title="Permanent link to this comment">18th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is there any known issues with ZendCore v2.5 install (<span class="caps">PHP</span> &amp; Apache2) and OpenSSL 0.9.8i. The <span class="caps">PHP</span> info page says everything is installed but everything seems to fail unless I pass ‘false’ along with the S3 constructor. Other than that I have got this to work on other installs with out issue. Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-283">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-283" title="Permanent link to this comment">18th Feb 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Lionel,</p>
                    <p>The third parameter to the constructor is whether to use <span class="caps">SSL</span> when communicating with S3.  If you get errors with S3 enabled, you might need to check to make sure you have updated certificates installed on the server.</p>
                    <p>If you’re not sure, or they look like they’re installed, you don’t lose much by using a non-<span class="caps">SSL</span> connection; there isn’t any sensitive data in the request <span class="caps">URL</span>, so unless you’re storing sensitive data there isn’t a problem.</p>
                    <p>If you <strong>are</strong> storing sensitive data, you should be encrypting it on your end before uploading anyway ;)</p>
                  </div>
                </div>
              </li>
              <li id="comment-285" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/4557506aa02dca8908317ae8c5b69db4?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Max" /><br />Max</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-285" title="Permanent link to this comment">12th Mar 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great peace of work!<br />Doeas anybody know how to retrive the total number of files in a bucket? I need this for pagination…</p>
                  </div>
                </div>
              </li>
              <li id="comment-286">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-286" title="Permanent link to this comment">12th Mar 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Max: The S3 class will grab all of the items in the bucket unless you specify the max number of items to return.  There’s no way to get just the total number of items in the bucket, but you could cache the results of a single call to getBucket and paginate the results yourself (instead of using the class to do it).</p>
                  </div>
                </div>
              </li>
              <li id="comment-288" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.fandoms.com/" rel="external nofollow" title="http://www.fandoms.com/">
                      <img src="http://www.gravatar.com/avatar/c00ede538d6c5d1df631c5c6be8244e3?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="popnoart" />
                      <br />
                      <span>popnoart</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-288" title="Permanent link to this comment">25th Mar 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great class, very easy to use!! Thanks a lot!</p>
                    <p>One question : Does anyone know how to delete a folder inside a bucket? I know how to delete the files inside the folder but I’m not able to delete the folder itself.</p>
                  </div>
                </div>
              </li>
              <li id="comment-289">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-289" title="Permanent link to this comment">25th Mar 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@popnoart: Buckets can’t actually contain folders.  Some S3 clients (like S3fox) pretend there are folders based on the prefix of object names, but there aren’t really folders in buckets.</p>
                  </div>
                </div>
              </li>
              <li id="comment-290" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://countinin.com/" rel="external nofollow" title="http://countinin.com/">
                      <img src="http://www.gravatar.com/avatar/3395c32e3f5d27463d42c20bb5a84d44?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Gerry" />
                      <br />
                      <span>Gerry</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-290" title="Permanent link to this comment">7th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>This seems like a great class, but the documentation seems a bit lacking.</p>
                    <p>1. In your example.php file you call putObjectFile() but in the description for putObjectFile() it calls it a “legacy function”. So I’m not sure if I should be using it or not.</p>
                    <p>2. The class documentation ( http://undesigned.org.za/files/s3-class-documentation/index.html ) seems incomplete as it does have any descriptions telling me what the functions do.</p>
                  </div>
                </div>
              </li>
              <li id="comment-291">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-291" title="Permanent link to this comment">7th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Gerry,</p>
                    <p>putObjectFile() will always exist but for additional functionality (that was added much later on) you want to be using S3::putObject(S3::inputFile()) in its place.</p>
                    <p>If you mouse over the method names on the documentation page there are descriptions available for each.  But you’re right, the documentation definitely needs work – although I think there is enough information available since most folks don’t have trouble figuring things out :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-292" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://countinin.com/" rel="external nofollow" title="http://countinin.com/">
                      <img src="http://www.gravatar.com/avatar/b08b38de24def8d1ddce54f55319bb01?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Gerry" />
                      <br />
                      <span>Gerry</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-292" title="Permanent link to this comment">7th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Yes I saw the mouse overs. Ok well let me use putObject as an example, here is the definition:</p>
                    <p>putObject (mixed $input, string $bucket, string $uri, [constant $acl = S3::ACL_PRIVATE], [array $metaHeaders = array()], [array $requestHeaders = array()])</p>
                    <p>and the mouseover description is:<br />“Put an Object” </p>
                    <p>So the description didn’t add anything to what the name had already given me, I have no idea what the arguments are for or how they change what the function does. I understand how it’s hard to write descriptions for functions that you know inside out as everything seems obvious to the author, but I really have no clue as to what $metaHeaders is for. I have to look into the code and work out what everything in there does to figure it out, which kinda removes the point of having documentation.</p>
                    <p>=========<br />example ripped from the php manual:<br />mixed str_replace  ( mixed $search  , mixed $replace  , mixed $subject  [, int &amp;$count  ] )</p>
                    <p>This function returns a string or an array with all occurrences of [search] in [subject] replaced with the given [replace] value.<br />=========</p>
                    <p>Don’t get me wrong, I’m awful with my own documentation and in telling you all this I’m learning myself about how I should document things in future.</p>
                  </div>
                </div>
              </li>
              <li id="comment-293">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/99e9671100a62022ec8dc565fa8a984e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="onassar" /><br />onassar</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-293" title="Permanent link to this comment">7th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Quick question.<br />I’m working with some web services which automatically push content to my S3 bucket for me.</p>
                    <p>The problem with this, is I’m not able to set the headers (eg. Expires) since their web service automatically pushes it on my behalf.</p>
                    <p>Do you have any ideas on how best to retrieve an object, and set headers? I looked through your source, but didn’t notice any examples to specifically deal with an object that already exists, and changing it after it’s been put on S3.</p>
                    <p>Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-294" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/99e9671100a62022ec8dc565fa8a984e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="onassar" /><br />onassar</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-294" title="Permanent link to this comment">7th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Figured out that the way to do this is to make a call via copyObject, stating the same source uri and bucket as the destinations.</p>
                    <p>The exception here, being that you then must set the headers for the destination object.</p>
                    <p>This class doesn’t have this, and I’ve tried hacking it but it wouldn’t seem to work.</p>
                    <p>Any thoughts?</p>
                  </div>
                </div>
              </li>
              <li id="comment-295">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/75d765c669913b345bf2a62c4e570a3b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="parag" /><br />parag</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-295" title="Permanent link to this comment">9th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>hi , we locate our media files at amazon s3.When a user request 4 download from Website (say x) , the file will be read at amazon &amp; putted to X. How about directly downloading the file at users location.?</p>
                  </div>
                </div>
              </li>
              <li id="comment-296" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/965ac937aa50bdcedf173249b38256e2?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="miguel" /><br />miguel</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-296" title="Permanent link to this comment">16th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>This may be a silly question…are the calls this class makes secure by default or do I have to specify that somehow? I mean, can someone sniff the “secret access key” Amazon provides us or is it encrypted? Thanks, sorry to be a dummy, I am new to this! :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-297">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-297" title="Permanent link to this comment">17th Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Miguel,</p>
                    <p>The secret key cannot be determined by an eavesdropper, whether or not you’re using an <span class="caps">SSL</span> connection.  Don’t worry, it’s safe :)</p>
                    <p>Look at the third parameter to the class constructor.  By default, the class uses <span class="caps">SSL</span> to communicate with Amazon S3.</p>
                  </div>
                </div>
              </li>
              <li id="comment-298" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/600068a10fdb792d76a8bbc95b21d643?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="bhimrao" /><br />bhimrao</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-298" title="Permanent link to this comment">22nd Apr 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>How to check expiry to the image?</p>
                  </div>
                </div>
              </li>
              <li id="comment-299">
                <div class="author">
                  <cite>
                    <a href="http://jungleg.com/" rel="external nofollow" title="http://jungleg.com/">
                      <img src="http://www.gravatar.com/avatar/b1b77d4c7b303b2110edb8fd705f0778?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jorge Escobar" />
                      <br />
                      <span>Jorge Escobar</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-299" title="Permanent link to this comment">5th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Don,<br />First of all great work!<br />I just wanted to let you know that when I try to use the putObjectString, the request hangs for 2 – 3 minutes and then returns true finally.</p>
                    <p>This is the code I’m trying:</p>
                    <p>//put body on S3</p>
                    <p>require_once(<span class="caps">LIBRARY</span>_PATH . “/s3/S3.php”);</p>
                    <p>$s3 = new S3(<span class="caps">AWS</span>_ACCESS_KEY_ID, <span class="caps">AWS</span>_SECRET_ACCESS_KEY);</p>
                    <p>if($s3-&gt;putObjectString(“hello loco”, ‘blovelspot’, ‘test/loco2.html’))</p>
                    <p>{</p>
                    <p>print “success”; die;</p>
                    <p>}</p>
                    <p>else</p>
                    <p>{</p>
                    <p>print “fail”; die;</p>
                    <p>}</p>
                    <p>Any ideas what I’m doing wrong?</p>
                  </div>
                </div>
              </li>
              <li id="comment-300" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/ef0a109c5108a67c6ec0496a316bb31d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="bhimrao" /><br />bhimrao</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-300" title="Permanent link to this comment">6th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>How are you checking expires headers?</p>
                  </div>
                </div>
              </li>
              <li id="comment-301">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-301" title="Permanent link to this comment">7th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@bhimrao: To which headers are you referring?</p>
                    <p>@Jorge: Can you duplicate the issue on another computer (preferably using a different <span class="caps">ISP</span>)?  I haven’t seen anything similar.</p>
                  </div>
                </div>
              </li>
              <li id="comment-302" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/ef0a109c5108a67c6ec0496a316bb31d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="bhimrao" /><br />bhimrao</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-302" title="Permanent link to this comment">8th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>i want to check the given expires header to the image<br />that it is properly given or not</p>
                  </div>
                </div>
              </li>
              <li id="comment-303">
                <div class="author">
                  <cite>
                    <a href="http://jungleg.com/" rel="external nofollow" title="http://jungleg.com/">
                      <img src="http://www.gravatar.com/avatar/b1b77d4c7b303b2110edb8fd705f0778?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jorge Escobar" />
                      <br />
                      <span>Jorge Escobar</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-303" title="Permanent link to this comment">11th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Heron,<br />I am doing this from an Amazon EC2 instance, so I’m sure it’s not related to the <span class="caps">ISP</span>. I did read in some Amazon forums there was some hanging on some file uploading operations  when the files are not images but text (the objects I’m trying to upload are <span class="caps">HTML</span> files), so what I ended doing was saving the <span class="caps">HTML</span> object first on the /tmp directory of the instance and then doing a putObjectFile. That works perfectly, so I’m sticking with it.</p>
                    <p>Thanks again for a wonderful library!</p>
                  </div>
                </div>
              </li>
              <li id="comment-304" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/fab848c4148147ad722ab49c4d1c34a8?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Frank Unwin" /><br />Frank Unwin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-304" title="Permanent link to this comment">12th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>What an excellent and simple implementation. First impressions are fantastic, not tried all the features.<br />Many thanks for your contribution.</p>
                  </div>
                </div>
              </li>
              <li id="comment-305">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-305" title="Permanent link to this comment">13th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Jorge:  I’m glad you’ve got it working.  Come to think of it, I don’t think I’ve ever used putObjectString.  I’ll pester Don into testing it sometime ;)</p>
                  </div>
                </div>
              </li>
              <li id="comment-306" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/a69c55f7f2ad1cca62a22c96b906d282?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin" /><br />Kevin</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-306" title="Permanent link to this comment">17th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great stuff but how do I just list files in a subfolder of bucket. e.g.<br />$bucketName=“thebucket”;// but what i really need is thebucket/this/that/theother”;</p>
                    <p>$contents = $s3-&gt;getBucket($bucketName);<br />print_r($contents); // too much info – just want a sub listing! <br />Thanks<br />Kevin</p>
                  </div>
                </div>
              </li>
              <li id="comment-307">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-307" title="Permanent link to this comment">19th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Kevin,</p>
                    <p>S3 doesn’t support folders.  Clients like S3Fox only <strong>imitate</strong> folders for convenience; as a result, this S3 class doesn’t support folders either.</p>
                    <p>The best thing you can do, therefore, is use the $prefix parameter to getBuckets.</p>
                    <p>For example:</p>
                    <p>print_r($s3-&gt;getBucket($bucketName, ‘this/that/’));</p>
                    <p>This would list the objects in $bucketname whose names start with ‘this/that/’ (which is how S3Fox emulates folders).</p>
                  </div>
                </div>
              </li>
              <li id="comment-309" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/2cdf89535c269848b03f314ca8f4ca19?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kevin Yeandel" /><br />Kevin Yeandel</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-309" title="Permanent link to this comment">26th May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hello again,<br />A little question, what’s the best way to move a file – I would rather not get and put. e.g. mv, unlink/link if it is possible. Many thanks for this code.<br />Kevin</p>
                  </div>
                </div>
              </li>
              <li id="comment-310">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Steve" /><br />Steve</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-310" title="Permanent link to this comment">31st May 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Amazing Amazon S3 Class!</p>
                    <p>Is there a way to to use wild cards in deleteobject? i.e. Somthing like; deleteObject($bucketName, 'this/that/*.mp4')</p>
                    <p>Also is it possible to copy from a bucket in one account to bucket in a different account? (I own both accounts.)</p>
                  </div>
                </div>
              </li>
              <li id="comment-311" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-311" title="Permanent link to this comment">4th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Kevin: You cannot “move” an object; there is nowhere to move it from or to.  A bucket is simply a collection of objects, an object is either in the bucket or it is not.  You can copy it from a bucket to the same bucket with a different name, and then delete the old object, and that’s as close as you can get to renaming it.</p>
                    <p>Steve: To your first question, no, you cannot use wildcards.  S3 is not a file system and does not understand wildcards.</p>
                    <p>You cannot directly copy from a bucket in one account to a bucket in another account using a single S3 service call; you’ll have to download it from the first account and upload it to the second account.</p>
                  </div>
                </div>
              </li>
              <li id="comment-312">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Steve" /><br />Steve</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-312" title="Permanent link to this comment">4th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Kevin – Thanks. My bad. Perhaps I didn’t ask the right question for my first question. How about Something like; DeleteObjects($bucketName,’/this/that)</p>
                    <p>For example I upload 150 objects (from my PC)to S3 and catalog them in a database. Then to delete them I iterate through them thus;</p>
                    <p>While($row = mysql_fetch_array($result))</p>
                    <p>{</p>
                    <p>$filename = $row[“FileName”] . “.mp4”;</p>
                    <p>$S3File = S3Folder/$filename”;<br />$s3-&gt;deleteObject($S3B,$S3File); </p>
                    <p>}</p>
                    <p>This takes 48 seconds.  However do to the same thing from my PC using:</p>
                    <p>“rescmd s3 delete-objects aws-key:<span>awskey</span> aws-secret:<span>awssecretkey</span> bucket:<span>S3B</span>  key-prefix:S3Folder” </p>
                    <p>takes only 8 seconds.</p>
                    <p>I’m not sure what rescmd does in this case but I can’t think that first its requesting a listing of all objects in the bucket with the prefix then making all the individual delete operations 6 times faster than my php script. Does it?</p>
                    <p>That’s too bad about not being able to copy to another account. What do people to for backup? In the hopefully unlikely case that my secret key is discovered it would be nice to have my stuff backed up in another account without the hassle of first downloading them to someplace else and then uploading again to S3. What a needless carbon footprint that produces. :-)</p>
                  </div>
                </div>
              </li>
              <li id="comment-313" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-313" title="Permanent link to this comment">4th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>As far as backups go, you don’t need to worry about that; S3 handles redundancy and availability for you.  Your data is stored on multiple physical drives in multiple geographically separated data centers (at least, that’s my understanding).</p>
                    <p>As far as your secret key goes, well, keep it secret :)  But if it does get discovered, you can just log in to your Amazon <span class="caps">AWS</span> account and get a new key (which erases your old one).  No need to maintain (or pay for) a second <span class="caps">AWS</span> account.</p>
                    <p>I’ll e-mail the S3 devs and ask them the best way to delete multiple files like that :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-314">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-314" title="Permanent link to this comment">4th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>The S3 <span class="caps">API</span> only supports deleting one file at a time.  I suspect the reason using the S3 class takes so much longer than rescmd is that the S3 class re-creates an internal object and re-initiates a connection with curl for every call to deleteObject, where as (I suspect) rescmd does not.</p>
                    <p>This isn’t really a <strong>bad</strong> thing, but it’s not optimal if you’re calling deleteObject two hundred times in a row.</p>
                    <p>Maybe I’ll write a function to do batch deletes more efficiently later.  I’m at work right now ;)</p>
                  </div>
                </div>
              </li>
              <li id="comment-316" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Steve" /><br />Steve</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-316" title="Permanent link to this comment">5th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Heron. Thanks for looking into optimizing deleteObject that would be great. The other issue about backup I understand that S3 has storage redundancy but that just protects the data thats there. If someone got the key and delete files then they are gone right? </p>
                    <p>[slightly off topic mode on:]<br />(This is why I’m worried about backup and why I’d like to be able to copy to a separate S3 account.)<br />I’m playing with some stuff that allows multiple users to upload stuff to my S3 account. I haven’t (yet) figured out how to set up ‘signed’ uploads.  I’m close using this (http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434) approach. I can generate the encoded policy and signature but can’t figure out how to get a command line utility to do the html post forms but I am making some progress. (http://www.autohotkey.com/forum/viewtopic.php?t=44844) so what I’ve done in the interim (really bad idea but used to test the rest of the application for now) is encode my secret key and when the user wants to upload the client requests the encoded key, decodes it and uploads the files. (the key is never saved in a file but still a bad idea) So I’m struggling with this a bit. (Until I get past the interim solution I was thinking of copying all the files to another S3 account that has a more secure key.)</p>
                  </div>
                </div>
              </li>
              <li id="comment-317">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-317" title="Permanent link to this comment">6th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Steve,</p>
                    <p>Yes, if someone deletes the files, they’re gone.  Amazon does not keep extra backup copies anywhere.</p>
                    <p>I do <span class="caps">HTTP</span> <span class="caps">POST</span> form uploads myself fairly often; if you control the server there is no reason for the end-user to ever have possession of your secret key.  However, if you’re wanting a command-line utility to do the uploads, you may consider writing your own web-based <span class="caps">API</span> that the command-line utility can hit instead of trying to post directly to S3.  That way you can have separate credentials for each user (your web <span class="caps">API</span> would ask for those), and you wouldn’t ever have to give end-users your secret key.</p>
                    <p>I realize writing your own web <span class="caps">API</span> with credentials isn’t trivial, but it’s not too difficult either; it may be the best solution to your problem, assuming you have access to a web server on which to run your <span class="caps">API</span>.</p>
                  </div>
                </div>
              </li>
              <li id="comment-322" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c0f2808288141a8a1394f98dce012b62?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Fabrizio" /><br />Fabrizio</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-322" title="Permanent link to this comment">23rd Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is it possible to set a  bandwidth limit for files upload?</p>
                  </div>
                </div>
              </li>
              <li id="comment-326">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-326" title="Permanent link to this comment">24th Jun 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Fabrizio, that’s not something that is controlled by the S3 class.</p>
                    <p>Depending on how you’re uploading the file, you might be able to control it through apache or php, or even your operating system or router, but it’s not something we can really help you with, sorry.</p>
                  </div>
                </div>
              </li>
              <li id="comment-455" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/245734ec42fc5f9263c5bf4a82699ba9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="sakthi" /><br />sakthi</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-455" title="Permanent link to this comment">18th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi,</p>
                    <p>I have tried your code, but i got the following warning without result.</p>
                    <p>Warning: S3::listBuckets(): [RequestTimeTooSkewed] The difference between the request time and the current time is too large. in S3.php on line 90</p>
                    <p>can you please check and let me know.</p>
                  </div>
                </div>
              </li>
              <li id="comment-456">
                <div class="author">
                  <cite>
                    <a href="http://www.xnapid.com/" rel="external nofollow" title="http://www.xnapid.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-456" title="Permanent link to this comment">18th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>sakthi,</p>
                    <p>You'll want to make sure that the time on the machine running the PHP is set up correctly.  (If it's 15:00 UTC, the machine's clock should be set accordingly, with the proper time zone if necessary.)</p>
                  </div>
                </div>
              </li>
              <li id="comment-465" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.lchsoft.net/" rel="external nofollow" title="http://www.lchsoft.net/">
                      <img src="http://www.gravatar.com/avatar/8f707ee742942503c94ead549a308102?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Lars Christian" />
                      <br />
                      <span>Lars Christian</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-465" title="Permanent link to this comment">25th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>First of all, thanks for a great class, I've used to create a script that mirrors a local folder structure to an S3 bucket.</p>
                    <p>But running this on lagre folder, say ~4000 files all in all, fails. The php script eats up all the memory to the point that all the virtual machine does i swapping. Top reports mem usage well above 90% for the PHP sync job.</p>
                    <p>Have you made any attempts helping the garbage collecotr free up memory using destructors and unsets?</p>
                    <p>Have anyone else encountered this memory problem?</p>
                    <p>Regards,</p>
                    <p>Lch</p>
                  </div>
                </div>
              </li>
              <li id="comment-466">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-466" title="Permanent link to this comment">25th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Lars: Heron and I are going to look into this.</p>
                  </div>
                </div>
              </li>
              <li id="comment-471" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/43d86ef7bcc91a33603df774439aab6c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Troy Hakala" /><br />Troy Hakala</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-471" title="Permanent link to this comment">28th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I get the following error every single time I try to upload large (&gt;200MB) files:</p>
                    <p>Warning: S3::putObject(): [55] select/poll returned error in S3.php on line 358</p>
                    <p>It sends data for a while and then the network traffic drops to zero and 30 seconds later or so it fails with the above error message.</p>
                    <p>I'm using version 0.4.0 of S3.php, libcurl 7.19.5 and PHP 5.2.6 on Debian.</p>
                    <p>Anyone else have this problem? Anyone know of a solution?</p>
                  </div>
                </div>
              </li>
              <li id="comment-472">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-472" title="Permanent link to this comment">28th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Troy,</p>
                    <p>Do you have access to another machine?  I'd like to know if you have the same problem uploading the same file from a different machine (preferably a different OS).  That could help narrow down where the problem is (differences in kernel versions, libcurl verisons, etc etc.)</p>
                    <p>Next time I boot into Linux I'll try uploading a large file and see what happens.</p>
                    <p>I can say, however, that my previous employer regularly uploaded 200+MB files without issues from a machine running Gentoo Linux.</p>
                  </div>
                </div>
              </li>
              <li id="comment-473" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/43d86ef7bcc91a33603df774439aab6c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Troy Hakala" /><br />Troy Hakala</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-473" title="Permanent link to this comment">28th Aug 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I have another linux box that I also use to upload to S3 and the versions are mostly the same but libcurl is 7.18.2 and the same thing occurs on that machine. I don't have any linux machine that is significantly different from these two as I generally keep up-to-date on all of them.</p>
                    <p>I was assuming that it was a problem with S3 but I can use a different S3 client on a Mac that doesn't use libcurl (it uses OS X's NSURL* classes) and it uploads the large files successfully.</p>
                    <p>I can give you an strace, if that helps.</p>
                    <p>FWIW, I found someone else reporting the same problem and there's supposedly a solution to it but I'm not a paying member of experts-exchange.com so I can't see the solution:</p>
                    <p>http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/Q_24551457.html</p>
                  </div>
                </div>
              </li>
              <li id="comment-475">
                <div class="author">
                  <cite>
                    <a href="http://bastiaanfronik.com/" rel="external nofollow" title="http://bastiaanfronik.com/">
                      <img src="http://www.gravatar.com/avatar/9d0ca9fa539cb7c766840ff18b3be89a?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Bastiaan Fronik" />
                      <br />
                      <span>Bastiaan Fronik</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-475" title="Permanent link to this comment">4th Sep 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>For those of you who run out of memory when uploading loads of files (using putObjectFile). Try to disable $useSSL (S3::$useSSL = false;).</p>
                    <p>My memory use dropped dramatically. It seems like something is leaking when using ssl.</p>
                    <p>Otherwise a very nice written class!</p>
                  </div>
                </div>
              </li>
              <li id="comment-535" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/fde04f0b02b4438cf370fbc2e63c4ffb?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="alex" /><br />alex</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-535" title="Permanent link to this comment">6th Oct 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I have this problem.</p>
                    <p>When I upload multiple files simultaneously on amazon s3 photos are uploaded less than you selected.</p>
                    <p>Example load at once 15 pictures on amazon s3 but I have only 10</p>
                    <p>Why?</p>
                    <p>There are settings timeout or other?</p>
                    <p>thanks</p>
                    <p>alex</p>
                  </div>
                </div>
              </li>
              <li id="comment-537">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-537" title="Permanent link to this comment">8th Oct 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>alex,</p>
                    <p>Are you uploading them one by one?  If not, how are you uploading them?  Are you checking the return value of putObject to make sure it succeeded?</p>
                    <p>- Heron</p>
                  </div>
                </div>
              </li>
              <li id="comment-541" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/fde04f0b02b4438cf370fbc2e63c4ffb?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="alex" /><br />alex</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-541" title="Permanent link to this comment">13th Oct 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>i have resolved the problem but now when i upload the file, it is impossibile to upload file over 2 Megabyte.</p>
                    <p>Why?</p>
                    <p>&#160;&#160;&#160;&#160;</p>
                    <p>Is there a solution to increase this limit?</p>
                    <p>depends Amazon S3 or S3 class?</p>
                    <p>thanhs</p>
                  </div>
                </div>
              </li>
              <li id="comment-543">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-543" title="Permanent link to this comment">13th Oct 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Alex:</p>
                    <p>Have you checked your INI settings to make sure there are no memory limits?</p>
                    <p>Try disable SSL (S3::$useSSL = false) - should give you unbuffered uploads.</p>
                  </div>
                </div>
              </li>
              <li id="comment-548" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/d51c4b498ec1658834213defea5eed7a?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Paul" /><br />Paul</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-548" title="Permanent link to this comment">21st Oct 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>is it possibile to set in the s3.php , privacy policy the max file size to upload?</p>
                    <p>thanks</p>
                  </div>
                </div>
              </li>
              <li id="comment-549">
                <div class="author">
                  <cite>
                    <a href="http://extendwerks.com/" rel="external nofollow" title="http://extendwerks.com/">
                      <img src="http://www.gravatar.com/avatar/e2553b9f557f130b2ce9d525ed279c41?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Mike P." />
                      <br />
                      <span>Mike P.</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-549" title="Permanent link to this comment">22nd Oct 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great Class - Thanks!</p>
                  </div>
                </div>
              </li>
              <li id="comment-551" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b62c056db161435ea023476913222820?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Para" /><br />Para</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-551" title="Permanent link to this comment">1st Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hello,</p>
                    <p>I am trying to use this class to check if a folder inside a bucket is empty or not.</p>
                    <p>Does anyone have any idea how I could do that?</p>
                    <p>thanks in advance</p>
                  </div>
                </div>
              </li>
              <li id="comment-552">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-552" title="Permanent link to this comment">1st Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Para,</p>
                    <p>There is no such thing as a "folder" in S3.  Folders are emulated by simply adding a prefix to an object name; for example, I might name an object "pictures/me.jpg".  Some clients (like S3Fox) treat that as a file named "me.jpg" in a folder named "pictures", but that's not how S3 itself treats things.</p>
                    <p>As a result, Don's S3 class only sees objects including their prefixes.  If you want to do the search yourself, simply list the contents of the bucket, and search for any that include the desired "folder" name in the object name.</p>
                    <p>I hope that makes sense :)</p>
                    <p>- Heron</p>
                  </div>
                </div>
              </li>
              <li id="comment-553" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/63ef21ac5ab2ee95f7c4554129926d54?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Naerk" /><br />Naerk</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-553" title="Permanent link to this comment">1st Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hello,</p>
                    <p>I have a problem with $s3-&gt;putObjectFile($uploadTmpFile, $bucketName, baseName($fileName), S3::ACL_PRIVATE</p>
                    <p>If i use small files like 2 MB, everything is great. But if the file is bigger than 12 MB it loads a long time and then i get a timeout.</p>
                    <p>If i uncomment the putObjectFile, my webserver has no problems to load files of 80 MB in php tmp dir.</p>
                    <p>Any ideas?</p>
                    <p>thanks</p>
                    <p>Naerk</p>
                  </div>
                </div>
              </li>
              <li id="comment-554">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-554" title="Permanent link to this comment">2nd Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Naerk,</p>
                    <p>Have you tried uploading a file directly to your webserver some other way (i.e. through FTP) and then seeing if putObjectFile can upload that file?</p>
                    <p>If you can try that, it will help narrow down the cause of the issue.</p>
                    <p>Thanks,</p>
                    <p>Heron</p>
                  </div>
                </div>
              </li>
              <li id="comment-555" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c8ccfb96a5dc39c239c7ef8910147532?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Tommy" /><br />Tommy</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-555" title="Permanent link to this comment">4th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi,</p>
                    <p>From the above comments I understand that your script is working fine.. But I am having an error when I apply this in my website. The program I put on the user side, here my plan is to upload the user profile images automatically to amazon.</p>
                    <p>I am using http://undesigned.org.za/2007/10/22/amazon-s3-php-class  script for uploading files to amazon s3. The buckets are listing properly but I am not able to upload files to buckets. I am getting the error,</p>
                    <p>S3::putObject(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed</p>
                    <p>and upload fails.</p>
                    <p>Also not able to create new buckets too.</p>
                    <p>Any solution..</p>
                    <p>Thanks in Advance ..</p>
                  </div>
                </div>
              </li>
              <li id="comment-556">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ian Anderson" /><br />Ian Anderson</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-556" title="Permanent link to this comment">6th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Tommy - it might be trying to use SSL - if you set the third parameter to false when instantiating S3, this might help</p>
                    <code>
                      <span class="source-html">class My_Service_Amazon_S3 extends S3<br />{<br />    public function __construct(<span class="source-variable">$awsUserKey</span>, <span class="source-variable">$awsPrivateKey</span>, <span class="source-variable">$useSSL</span> = false)<br />    {<br />        parent::__construct(<span class="source-variable">$awsUserKey</span>, <span class="source-variable">$awsPrivateKey</span>, <span class="source-variable">$useSSL</span>);<br />    }    <br />}</span>
                    </code>
                  </div>
                </div>
              </li>
              <li id="comment-557" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/547fa9c3bc520bca42f4ad120ba26b1c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Niro" /><br />Niro</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-557" title="Permanent link to this comment">8th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Excellent class! thank you very much Don.</p>
                    <p>I'm having the large file problem mentioned in earlier posts (Nic, Sven, Bryan). My files are 450MB in size. And the upload is from Linux virtual private server to S3 using putObjectFile. The symptoms are that the cpu consumption is stuck at 100% for HTTPD process.</p>
                    <p>The information I could find here suggests that some setting of PHP/Apache/Curl are causing time out.</p>
                    <p>Can anyone suggest which configurations to check? or other way to find out the exact reason?</p>
                    <p>Thanks, Niro</p>
                  </div>
                </div>
              </li>
              <li id="comment-558">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-558" title="Permanent link to this comment">8th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Nori: SSL can cause some problems when uploading large files.  Because the stream is encrypted, files need to be loaded into memory - and the 100% CPU usage you're seeing is most likely the encryption.</p>
                    <p>If you don't need SSL, don't use it.</p>
                  </div>
                </div>
              </li>
              <li id="comment-559" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/547fa9c3bc520bca42f4ad120ba26b1c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Niro" /><br />Niro</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-559" title="Permanent link to this comment">8th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks Don, I tried it without SSL and it still gets stuck.</p>
                    <p>Any other suggestions?</p>
                  </div>
                </div>
              </li>
              <li id="comment-560">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ian Anderson" /><br />Ian Anderson</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-560" title="Permanent link to this comment">11th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Awesome class, Don - it's saving us masses of time. I'm writing a PHP class to sync our buckets to a local server for backup purposes, and I have a question regarding subfolders</p>
                    <p>I have made it so that my script attempts to create a folder with the name of any "subfolder" objects returned by S3, and in my testing S3 has always returned them in the right order so that an object with name</p>
                    <p>folder1/folder2/folder3/foo.txt</p>
                    <p>always appears in your listing after the "folders"</p>
                    <p>folder1/</p>
                    <p>folder1/folder2/</p>
                    <p>folder1/folder2/folder3/</p>
                    <p>folder1/folder2/folder3/foo.txt</p>
                    <p>Will it always return the "subfolders" in the correct order as above?</p>
                    <p>i.e. can I trust it not to try to save a file into a folder I haven't created yet?</p>
                    <p>Many thanks indeed</p>
                    <p>Ian Anderson</p>
                  </div>
                </div>
              </li>
              <li id="comment-561" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ian Anderson" /><br />Ian Anderson</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-561" title="Permanent link to this comment">11th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Niro - How much RAM does your virtual server have? Maybe it's going into swap</p>
                  </div>
                </div>
              </li>
              <li id="comment-562">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c8ccfb96a5dc39c239c7ef8910147532?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Tommy" /><br />Tommy</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-562" title="Permanent link to this comment">11th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thank you Ian Anderson.. Thanks for your reply !! Problem solved..</p>
                  </div>
                </div>
              </li>
              <li id="comment-563" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f57e2cfc69e45b9b29eb700546c69ba2?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Anoop" /><br />Anoop</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-563" title="Permanent link to this comment">11th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Great Script !! and nicely written. Thanks.</p>
                    <p>I have a small issue, how can I put files to sub-folders. ?</p>
                    <p>Eg:/ I want to store a file to bucket/sub-bucket1/sub-bucket2/. Here how can I store to 'sub-bucket2' ?</p>
                    <p>Thanks in advance..</p>
                  </div>
                </div>
              </li>
              <li id="comment-565">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/833262925bd43cb65509d59372d46dbc?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Niro" /><br />Niro</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-565" title="Permanent link to this comment">25th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Ian,</p>
                    <p>The server has total 1.8G, 400M used and about 1.4G free</p>
                    <p>Also added to the script</p>
                    <p>ini_set('memory_limit', '128M');</p>
                  </div>
                </div>
              </li>
              <li id="comment-566" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/833262925bd43cb65509d59372d46dbc?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Niro" /><br />Niro</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-566" title="Permanent link to this comment">25th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Ian, Just run a test (looking at top while the file transfer is supposed to happen). Definately not a swapping issue.</p>
                  </div>
                </div>
              </li>
              <li id="comment-567">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b62c056db161435ea023476913222820?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Para" /><br />Para</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-567" title="Permanent link to this comment">26th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hello,</p>
                    <p>I have a question.</p>
                    <p>Is there any way to get traffic statistics for an amazon s3 account(total downloaded bytes and total downloaded bytes) using this library?</p>
                    <p>Thank you in advance</p>
                  </div>
                </div>
              </li>
              <li id="comment-568" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-568" title="Permanent link to this comment">26th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Niro: Remember that you'd need to set the memory limit in php.ini - if you are posting files also remember to the set post_max_size INI directive.  Does seem to be memory lated though.</p>
                  </div>
                </div>
              </li>
              <li id="comment-569">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-569" title="Permanent link to this comment">26th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Para: There is, which is why the class contains some functionality for logging.  I've been working on a S3 statistics app using this class - right now it parses S3 logs and stores the data in MySQL.  I'll try get around to packaging it for release in the next few days.  Wanted to release it with a GUI but can't find the time for that at the moment.</p>
                  </div>
                </div>
              </li>
              <li id="comment-570" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b62c056db161435ea023476913222820?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Para" /><br />Para</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-570" title="Permanent link to this comment">26th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I would really only need the total ammount of bytes downloaded and the total ammount downloaded? what function should I use I didn't find one that handeled this?</p>
                  </div>
                </div>
              </li>
              <li id="comment-572">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-572" title="Permanent link to this comment">26th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Para: There is no function to do what you need.  See the <a href="http://docs.amazonwebservices.com/AmazonS3/latest/index.html?ServerLogs.html" rel="external nofollow" onclick="window.open(this.href); return false;">logging documentation</a>.  The class lets you enable/disable logging.  You would still need to download those logs and parse them accordingly.</p>
                  </div>
                </div>
              </li>
              <li id="comment-573" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1d5c2531ec51bac60d3ae9cc1a722a5c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="cjsewell" /><br />cjsewell</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-573" title="Permanent link to this comment">30th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi there, I am trying to get the total size of a bucket, so far the only way I can do it is by looping through the response of getBucket.</p>
                    <p>This works, but is extremely slow, especially for large buckets.</p>
                    <p>Is there any better, faster way?</p>
                  </div>
                </div>
              </li>
              <li id="comment-574">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-574" title="Permanent link to this comment">30th Nov 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@cjsewell: Unfortunately that's the only way.  Better way might be to maintain a local SQL based listing for buckets and use that to calculate sizes.</p>
                  </div>
                </div>
              </li>
              <li id="comment-576" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/28ddfabff29c92b1bb384a57915fe640?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Kirby" /><br />Kirby</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-576" title="Permanent link to this comment">4th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi-</p>
                    <p>I am creating a jpg bytearray in actionscript, passing it to php, and attempting to upload to the S3 using putObject.  Unfortunately, I get stuck with an error that says "MalFormed XML..." I tried looking at the other threads but they weren't clear on their answers.  Here is my code:</p>
                    <p>//it passings a jpg bytearray name "jpgData"</p>
                    <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</p>
                    <p>$s3 = new S3($awsAccessKey, $awsSecretKey);</p>
                    <p>$filename = "test.jpg";</p>
                    <p>$input = array();</p>
                    <p>$input["data"] = $jpgData-&gt;data;</p>
                    <p>$input["type"] = "image/jpg";</p>
                    <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</p>
                    <p>return $s3-&gt;putObject($input, "storage.kirbysbeard.com", $fileName, "public-read");</p>
                    <p>Any ideas?  Thanks and your class is awesome!</p>
                  </div>
                </div>
              </li>
              <li id="comment-577">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/9aca70f41c2f1cd1aacc64a4fe6a4b46?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="laxmikant" /><br />laxmikant</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-577" title="Permanent link to this comment">8th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>how i can create sub folder plz help me</p>
                  </div>
                </div>
              </li>
              <li id="comment-578" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.dennissystems.net/" rel="external nofollow" title="http://www.dennissystems.net/">
                      <img src="http://www.gravatar.com/avatar/1d5c2531ec51bac60d3ae9cc1a722a5c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Corey Sewell" />
                      <br />
                      <span>Corey Sewell</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-578" title="Permanent link to this comment">9th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi, I found a faster way to get sizes of buckets. I ended up making a class for downloading and parsing the reports you get from the AWS portal.</p>
                    <p>Its related to your class so thought I would share. You can find out more here:</p>
                    <p>http://amazontools.blogspot.com/2009/12/first-alpha-release.html</p>
                    <p>Cheers</p>
                  </div>
                </div>
              </li>
              <li id="comment-579">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/9aca70f41c2f1cd1aacc64a4fe6a4b46?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="laxmikant" /><br />laxmikant</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-579" title="Permanent link to this comment">9th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>thanks buddy</p>
                  </div>
                </div>
              </li>
              <li id="comment-580" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/9aca70f41c2f1cd1aacc64a4fe6a4b46?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="laxmikant" /><br />laxmikant</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-580" title="Permanent link to this comment">9th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>in one bucket i m not able to uplaod the files by same code i m able to upload the file  in another bucket. what's reason any one can help me</p>
                    <p>Any ideas? Thanks</p>
                  </div>
                </div>
              </li>
              <li id="comment-581">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-581" title="Permanent link to this comment">10th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>laxmikant:  Do you have write permissions in the bucket you're trying to write to?</p>
                  </div>
                </div>
              </li>
              <li id="comment-582" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ian Anderson" /><br />Ian Anderson</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-582" title="Permanent link to this comment">10th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I have a complaint to make - it's working too well and I don't understand why :)</p>
                    <p>When I call getBucket(), as I understand things, it should only receive 1000 objects from Amazon and the truncated property should be set to true so that I know to call it again</p>
                    <p>But I'm receiving all the objects in my bucket anyway - about 1400 - and the truncated property is still set to true</p>
                    <p>Does anyone else get this?</p>
                  </div>
                </div>
              </li>
              <li id="comment-583">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ian Anderson" /><br />Ian Anderson</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-583" title="Permanent link to this comment">10th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Ah - I think I see the magic that does it, sorry</p>
                    <p>do { ... }   while ($response !== false &amp;&amp; (string)$response-&gt;body-&gt;IsTruncated == 'true');</p>
                    <p>When I echo out a marker at the top of the loop it only gets echoed once though, and it should get echoed twice - weird. But it works brilliantly - thanks once again, Don</p>
                  </div>
                </div>
              </li>
              <li id="comment-584" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-584" title="Permanent link to this comment">10th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Ian,</p>
                    <p>getRequest actually retrieves responses in two different places.  Right above the do-while loop is an if statement that checks if the first response was truncated, and if so, it enters the loop, where it checks for further responses.</p>
                    <p>Does that make sense?</p>
                    <p>- Heron</p>
                  </div>
                </div>
              </li>
              <li id="comment-585">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/fbec42f2761e00df6caf473ce6d77684?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="ilija" /><br />ilija</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-585" title="Permanent link to this comment">13th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi,</p>
                    <p>I am little bit confused with REST api and how to use it.</p>
                    <p>My concern is if using this script file will get downloaded</p>
                    <p>to server first before going to a client browser or is it a way to download file from s3 to client browser directly.</p>
                    <p>I am looking for a way to skip double bandwidth (from s3 to serevr-&gt;server to client).</p>
                    <p>Thank you.</p>
                    <p>I.</p>
                  </div>
                </div>
              </li>
              <li id="comment-589" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-589" title="Permanent link to this comment">13th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>ilija:</p>
                    <p>This S3 class only allows client-&gt;server-&gt;Amazon S3 transfers.  If you want client-&gt;Amazon S3 transfers, you'll want to set up an upload form using POST.</p>
                    <p>Read this example:</p>
                    <p>http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1618</p>
                    <p>Hope that helps.</p>
                    <p>- Heron</p>
                  </div>
                </div>
              </li>
              <li id="comment-590">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/a94f07b6f901ace75579d8780898f780?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Khanh" /><br />Khanh</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-590" title="Permanent link to this comment">14th Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thank you so much for such a useful class.  I was able to use this class as expected to upload files to S3. I am running into an issue with any files larger then 10mb.  I've changed the upload size in php to 20mb and still no luck.  There are no errors being kicked back either.</p>
                    <p>$s3-&gt;putObjectFile($fileTempName, $dest_bucket, $fileName, S3::ACL_PUBLIC_READ)</p>
                  </div>
                </div>
              </li>
              <li id="comment-592" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.youtorrent.com/" rel="external nofollow" title="http://www.youtorrent.com/">
                      <img src="http://www.gravatar.com/avatar/00cabc96a2d0061b03e4b265b9555f8c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Yousef" />
                      <br />
                      <span>Yousef</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-592" title="Permanent link to this comment">21st Dec 2009</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Khanh, we were having the same problem so we tried all the usual PHP changes (post_max_size, upload_max_filesize, memory_limit, max_execution_time). None of them helped... In the end we figured out it was the Apache timeout stopping the script completing. Now it's working fine for 50MB files. We'll be trying larger ones later.</p>
                    <p>Great class by the way!</p>
                  </div>
                </div>
              </li>
              <li id="comment-594">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b9db06fe263cf4f64cf29abb44cc2cbc?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Hugo" /><br />Hugo</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-594" title="Permanent link to this comment">7th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is there a way  to append a string to the name of the file while uploading it to the S3 server? ie: file to upload using the html form = my_file.txt once uploaded would become 1_my_file.txt</p>
                    <p>Thank you</p>
                  </div>
                </div>
              </li>
              <li id="comment-595" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/d12bc7e9e1a467895a71ef4a15ccf6ad?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Luk" /><br />Luk</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-595" title="Permanent link to this comment">16th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi,</p>
                    <p>I just started to use this class, and I am having problems with example-cloudfront.php.</p>
                    <p>Warning: S3::listDistributions(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in S3.php on line 935</p>
                    <p>Even when I try to change the resource to 2009-12-01/distribution, the warning is the same. When I try to set $useSSL to false, I cannot obviously connect to the host... Besides, I can use listBuckets() only with disabled SSL, so I am not really sure what is wrong, or what could help.</p>
                    <p>Any ideas?</p>
                    <p>Thanks,</p>
                    <p>Luk</p>
                  </div>
                </div>
              </li>
              <li id="comment-596">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/d12bc7e9e1a467895a71ef4a15ccf6ad?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Luk" /><br />Luk</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-596" title="Permanent link to this comment">16th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi again :),</p>
                    <p>is it correct, this class doesn't support creating/listing/updating/deleting streaming distributions, or am i missing something??</p>
                    <p>Thank you, Luk</p>
                  </div>
                </div>
              </li>
              <li id="comment-597" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/cc0caf565a7aeee3e3caf6198945de39?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Arifcsecu(Bangladesh)" /><br />Arifcsecu(Bangladesh)</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-597" title="Permanent link to this comment">23rd Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>i got this error. i don't understand why this happen?</p>
                    <p>Warning: S3::putObject(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in C:\xampp\htdocs\S3.php on line 358</p>
                    <p>Something went wrong while uploading your file... sorry.</p>
                  </div>
                </div>
              </li>
              <li id="comment-598">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/cc0caf565a7aeee3e3caf6198945de39?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Arifcsecu(Bangladesh)" /><br />Arifcsecu(Bangladesh)</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-598" title="Permanent link to this comment">24th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>when i sent</p>
                    <p>S3::$useSSL = false;</p>
                    <p>$s3-&gt;putBucket($bucket,S3::ACL_PRIVATE);</p>
                    <p>i got the error.</p>
                    <p>Warning: S3::putBucket(abc, private, ): [RequestTimeTooSkewed] The difference between the request time and the current time is too large. in C:\xampp\htdocs\np\S3.php on line 226</p>
                    <p>Warning: S3::putObject(): [RequestTimeTooSkewed] The difference between the request time and the current time is too large. in C:\xampp\htdocs\np\S3.php on line 358</p>
                    <p>Something went wrong while uploading your file... sorry.</p>
                  </div>
                </div>
              </li>
              <li id="comment-599" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-599" title="Permanent link to this comment">24th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Arifcsecu,</p>
                    <p>Amazon S3 uses time to verify signatures; if the sigature says "10:00 am GMT" but it's actually 5:00pm GMT Amazon will reject the request.</p>
                    <p>Make sure the computer running the script has its time set properly - either set it to the correct GMT time, or set the time and the timezone properly for its location.</p>
                  </div>
                </div>
              </li>
              <li id="comment-600">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/dbfbc860cdfd67e0082e2d21ec9c3b03?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Liam" /><br />Liam</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-600" title="Permanent link to this comment">26th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I have just started using your S3 class and when I try to upload a file I recieve the following error: "S3::inputFile(): Unable to open input file:"</p>
                    <p>I am completely lost to what is causing this error, any help would be much appreciated!</p>
                    <p>Thanks!</p>
                  </div>
                </div>
              </li>
              <li id="comment-601" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/cc0caf565a7aeee3e3caf6198945de39?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Arifcsecu(Bangladesh)" /><br />Arifcsecu(Bangladesh)</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-601" title="Permanent link to this comment">26th Jan 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks Boss Reron.</p>
                    <p>i have got more than 1000 errors here.</p>
                    <p>Now this works fine.</p>
                    <p>Again thank you.</p>
                  </div>
                </div>
              </li>
              <li id="comment-603">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/059c798e2ab4aa236e721fd49d675fd3?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Loz" /><br />Loz</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-603" title="Permanent link to this comment">4th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I cant get this to work :(</p>
                    <p>&lt;?php echo $s3‐&gt;getAuthenticatedURL("evp-4b69f2e172842-e7015e5af93fdd8e3157715cb3c112db", "video.mp4", 120); ?&gt;</p>
                    <p>spits out this error</p>
                    <p>Fatal error: Call to undefined function getAuthenticatedURL()</p>
                    <p>any help appreciated.</p>
                    <p>I used the firefox S3 plugin, and set EVERYONE to NO, and authenticated users to YES</p>
                    <p>I dont understand whats going on here :(</p>
                  </div>
                </div>
              </li>
              <li id="comment-604" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-604" title="Permanent link to this comment">4th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Loz: did you require('S3.php'); at the top of your PHP code?  Did you properly initialize the $s3 variable by creating an instance of the S3 class?</p>
                    <p>If you're trying to use it statically, you need to set the S3 access key and secret key with the appropriate static method, and access it via S3::methodname() rather than with a variable.</p>
                    <p>I can give you more help, but you'll have to show more of your code than just one line.  Feel free to e-mail me at heron@xnapid.com if you need more help.</p>
                  </div>
                </div>
              </li>
              <li id="comment-605">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/08ae85f663496b2665f0ad2fd16c424c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="jbq" /><br />jbq</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-605" title="Permanent link to this comment">4th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I created a bucket with s3cmd with both lower and uppercase chars, and when using your class I kept getting the following error until I removed the strtolower($bucket) call in the S3Request constructor: S3::putObject(): [NoSuchBucket] The specified bucket does not exist</p>
                  </div>
                </div>
              </li>
              <li id="comment-606" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/08ae85f663496b2665f0ad2fd16c424c?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="jbq" /><br />jbq</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-606" title="Permanent link to this comment">4th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>OK I understand now, I have to call putObject() with empty bucket name and rather have the bucket name included in the URI.  This way I don't come across the problem and don't get signature mismatch.  There must be a bug somewhere in the S3 class when bucket parameter is defined and "Host: mybucket.s3.amazonaws.com" is used</p>
                  </div>
                </div>
              </li>
              <li id="comment-607">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/059c798e2ab4aa236e721fd49d675fd3?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Loz" /><br />Loz</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-607" title="Permanent link to this comment">5th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi Heron</p>
                    <p>Thanks for replying.</p>
                    <p>yes, this is the code I used at the top of my php page.</p>
                    <p>XXXX = my amazon key stuff.</p>
                    <p>&lt;?php</p>
                    <p>$S3AWSID='XXXXXXXXXX';</p>
                    <p>$S3AWSSECRET='XXXXXX';</p>
                    <p>require_once 'S3.php';</p>
                    <p>$s3 = new S3("$S3AWSID", "$S3AWSSECRET");</p>
                    <p>?&gt;</p>
                    <p>This is the ebook I followed.</p>
                    <p>http://www.ask-me-about.com/Securing-Files-on-S3.pdf</p>
                    <p>The S3.php page is in the same directory as that of the php file that contains that information at the top of the page.</p>
                    <p>Thanks for your email, i will send you a note shortly.</p>
                    <p>Cheers</p>
                    <p>Loz</p>
                  </div>
                </div>
              </li>
              <li id="comment-608" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/e2b8a2a227448f27a88e446dea19d84e?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="chandrav" /><br />chandrav</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-608" title="Permanent link to this comment">9th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>if the bucket name has "/" in it it does not create recursive directory.</p>
                    <p>say you want to create a director test2 in test.</p>
                    <p>$handle-&gt;putBucket("test/test2", 'public-read');</p>
                    <p>this gives me an error.</p>
                    <p>Is there a way to do this?</p>
                  </div>
                </div>
              </li>
              <li id="comment-609">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-609" title="Permanent link to this comment">9th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>chandrav,</p>
                    <p>There's no such thing as a 'folder' or 'directory' in S3 buckets.  If you want to simulate directories, you need to prefix your object names with the virtual directory name.  For example, suppose you want to pretend there's a folder named "test".  What you need to do is to name all of the objects that go in that folder such that they begin with "test/".  So if "foobar.html" goes in the "test" folder, you'd put it in your S3 bucket with the name "test/foobar.html".</p>
                    <p>Again, S3 has no concept of folders or directories.  S3Fox and tools like it simply pretend there are folders, based on filename prefixes.</p>
                  </div>
                </div>
              </li>
              <li id="comment-610" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/4afc5fe500a7a35972bce88028d60868?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Scott" /><br />Scott</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-610" title="Permanent link to this comment">11th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I seem to be bumping into the same SSL problem everyone else. I'm running tests on a local XAMPP install- I can upload files just fine and verified them via S3Fox. However, any attempt to list buckets or put buckets or do anything else drops the following error:</p>
                    <p>Warning: S3::listBuckets(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in C:\xampp\htdocs\S3Native\S3.php on line 91</p>
                    <p>I tried setting $useSSL=false in the constructor, but it didn't change anything. Ideas?</p>
                  </div>
                </div>
              </li>
              <li id="comment-611">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/116cb6a47c79c94688c98d80e710c5af?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="ian" /><br />ian</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-611" title="Permanent link to this comment">12th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Scott:</p>
                    <p>For a workaround, edit the S3 class, and go to ~ line 1222.</p>
                    <p>You have to disable Peer Verification (replace 1, with 0), in this line:</p>
                    <p>curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 1);</p>
                    <p>Hope this helps.</p>
                  </div>
                </div>
              </li>
              <li id="comment-612" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/cb743767148c3468b6a0b36078b9cd68?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Andrew Slater" /><br />Andrew Slater</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-612" title="Permanent link to this comment">13th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Same SSL3 etc problem -- this is new as of yesterday for me.  Nothing changed on my end, so I'm guessing that maybe something changed on Amazon's end that we need to change in the code?</p>
                    <p>Andrew</p>
                  </div>
                </div>
              </li>
              <li id="comment-613">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/cb743767148c3468b6a0b36078b9cd68?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Andrew Slater" /><br />Andrew Slater</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-613" title="Permanent link to this comment">13th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@ian -- that did it.  Looks like I came to the site here about 40 seconds too early!</p>
                  </div>
                </div>
              </li>
              <li id="comment-614" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b063188bb74d09d9d4d705dd740ee8cc?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="a.yamanoi" /><br />a.yamanoi</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-614" title="Permanent link to this comment">24th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thanks for a great class!</p>
                    <p>In the copyObject(...) function,</p>
                    <p>...</p>
                    <p>-$rest-&gt;setAmzHeader('x-amz-copy-source', sprintf('/%s/%s', $srcBucket, $srcUri));</p>
                    <p>+$rest-&gt;setAmzHeader('x-amz-copy-source', sprintf('/%s/%s', $srcBucket, rawurlencode($srcUri)));</p>
                    <p>...</p>
                    <p>I use above code for multibyte filenames.</p>
                  </div>
                </div>
              </li>
              <li id="comment-615">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/ed5283df3d2f437b63dc31519d30af6d?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="mconnors" /><br />mconnors</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-615" title="Permanent link to this comment">27th Feb 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I could really use some help. After having a massive directory tree of a million files uploaded to a bucket with AWS import, I can't see any folders with anything other than cyberduck or s3fox. All other attempts won't show the folders including this class. Any ideas?</p>
                  </div>
                </div>
              </li>
              <li id="comment-616" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/ba1332bd2c43827052b471ac62a5c3bb?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="rvera10" /><br />rvera10</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-616" title="Permanent link to this comment">1st Mar 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I'm new to php and was wondering if I could get some help in how to get a file from s3 back to the browser.  I believe I need to use the getObject('bucketname', 'uri') function.  But I do not want to save it to the server and then open it open to flush it out to the browser.  I would like to take the return Object or Reference to what's being returned in the getObject and probably use something like fpassthru().  But not sure if this is the correct way to do this.</p>
                    <p>Any help will be greatly appreciated.</p>
                    <p>Thanks in advance.</p>
                  </div>
                </div>
              </li>
              <li id="comment-617">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-617" title="Permanent link to this comment">2nd Mar 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>rvera10,</p>
                    <p>If you want the file on S3 to be the only thing passed to the user, you could simply redirect them to the URL of the object on S3 (perhaps using an authenticated URL if it's a private file).</p>
                    <p>If you want the file embedded in other output, though, well it depends.  If it's an image, then again you can use the URL straight to the S3 object as the image's URL in the HTML output.  If it's a text file, then S3 isn't really a good place to store it.</p>
                  </div>
                </div>
              </li>
              <li id="comment-618" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-618" title="Permanent link to this comment">2nd Mar 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>mconnors,</p>
                    <p>That sounds like something you should contact the S3 team about (try the forums at aws.amazon.com).  I don't know why that might be happening.</p>
                  </div>
                </div>
              </li>
              <li id="comment-619">
                <div class="author">
                  <cite>
                    <a href="http://toddish.co.uk/" rel="external nofollow" title="http://toddish.co.uk/">
                      <img src="http://www.gravatar.com/avatar/7c1ff10d3a5a1e5e8cf16f3d7a1c2f62?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Todd" />
                      <br />
                      <span>Todd</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-619" title="Permanent link to this comment">2nd Mar 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Finally needed to look into S3, and this class has saved me a lot of time.  Thanks!</p>
                  </div>
                </div>
              </li>
              <li id="comment-620" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/a4e680af1c90f7e058fea7002e4ddcc8?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Gnome" /><br />Gnome</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-620" title="Permanent link to this comment">4th Mar 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>S3 versioning please.</p>
                    <p>v0.4.0 is very old.</p>
                  </div>
                </div>
              </li>
              <li id="comment-626">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/32b4b6baef737afb645cf58f2b57e852?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="pawan kumar" /><br />pawan kumar</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-626" title="Permanent link to this comment">19th Apr 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hello Sir</p>
                    <p>This script work fine for small files. but when i upload large file e.g. 80MB,  The file is moved to s3 ok but PHP gives up waiting to and so does not execute the rest of the code.Can any one provide me the solution for this ?</p>
                  </div>
                </div>
              </li>
              <li id="comment-627" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.coderchris.com/" rel="external nofollow" title="http://www.coderchris.com/">
                      <img src="http://www.gravatar.com/avatar/151e36cc7f789a4790c8ca437e3a1f60?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Chris Dean" />
                      <br />
                      <span>Chris Dean</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-627" title="Permanent link to this comment">27th Apr 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Just seen this and admit I've not read anything about it fully yet, but I was thinking of building a kohana module around cloudfusion (http://getcloudfusion.com/) to do something similar...</p>
                    <p>Not sure if it'd be of benefit to you to investigate cloudfusion integration for this project?</p>
                    <p>Chris</p>
                  </div>
                </div>
              </li>
              <li id="comment-629">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c2c8a13036c02b276223473f3619f4db?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="RJ" /><br />RJ</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-629" title="Permanent link to this comment">10th May 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is there a way by which i can generate url for files to be downloaded directly.....currently the url generated through getAuthenticatedUrl opens the image in d clients browser...i want it to be downloaded.....</p>
                    <p>Thanks</p>
                  </div>
                </div>
              </li>
              <li id="comment-633" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1b2b43a0a5760aab02dd723c1a09e24b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="John H." /><br />John H.</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-633" title="Permanent link to this comment">1st Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Is there a way we can just list folders in a bucket? I am having a hard time figuring that out.</p>
                  </div>
                </div>
              </li>
              <li id="comment-634">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/119a4e255277db4b9b8c2c0aa88a5a36?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Andrew" /><br />Andrew</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-634" title="Permanent link to this comment">5th Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi there,</p>
                    <p>great class - however I can't test it and I think it is a problem that I ran my server localy via MAMP PRO and a special port on my Mac. The class creation doesn't work and the page loads endless without any error message.</p>
                    <p>Can anyone share a tip what this could be!</p>
                    <p>Thanks a lot for any help!</p>
                    <p>Andrew</p>
                  </div>
                </div>
              </li>
              <li id="comment-635" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/119a4e255277db4b9b8c2c0aa88a5a36?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Andrew" /><br />Andrew</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-635" title="Permanent link to this comment">5th Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Problem solved - my Mac didn't allow the outbound call to S3 Server :)</p>
                  </div>
                </div>
              </li>
              <li id="comment-637">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/758fce6d6a550aea7b9b3e8971e86bc9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Terenn" /><br />Terenn</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-637" title="Permanent link to this comment">11th Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Thank you very much!</p>
                    <p>EDIT: "Your comment looks like it could be spam.</p>
                    <p>Please try altering your input."</p>
                  </div>
                </div>
              </li>
              <li id="comment-638" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/800db2c62d011cecbc8eb7201ba74aa6?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Frank Koehl" /><br />Frank Koehl</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-638" title="Permanent link to this comment">14th Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Just wanted to ping this post, make sure that development on this class wasn't dead. Has the Amazon API simply stabilized?</p>
                  </div>
                </div>
              </li>
              <li id="comment-639">
                <div class="author">
                  <cite>
                    <a href="http://www.emarketsouth.com/" rel="external nofollow" title="http://www.emarketsouth.com/">
                      <img src="http://www.gravatar.com/avatar/8ceb646bcd6be69592a0650a66e1185b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Ty Wangsness" />
                      <br />
                      <span>Ty Wangsness</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-639" title="Permanent link to this comment">18th Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I was having a hard time getting this class to let me create buckets in the US West or Asia Pacific regions.  The location string for US West is "us-west-1" and the location string for Asia Pacific is "ap-southeast-1". Then you have to edit one line in this class due to Amazon being case sensitive:</p>
                    <p>Line 213:</p>
                    <p>$locationConstraint = $dom-&gt;createElement('LocationConstraint', strtoupper($location));</p>
                    <p>becomes:</p>
                    <p>$locationConstraint = $dom-&gt;createElement('LocationConstraint', $location);</p>
                  </div>
                </div>
              </li>
              <li id="comment-640" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.orderingdisorder.com/" rel="external nofollow" title="http://www.orderingdisorder.com/">
                      <img src="http://www.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Heron" />
                      <br />
                      <span>Heron</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-640" title="Permanent link to this comment">18th Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Frank Koehl: The API has not changed very much at all since the last update, with the exception of S3's recently released RRS feature.  If there's a big demand for it I'll pester Don to update the code ;)</p>
                    <p>The code as it stands is quite stable and easy to use.</p>
                  </div>
                </div>
              </li>
              <li id="comment-641">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/8d041b0172c0c1a1ca8b159c47e84534?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Abhijit" /><br />Abhijit</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-641" title="Permanent link to this comment">22nd Jun 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I'm trying to save a image into a subfolder (bucketname/subfolder/first.jpg) and somehow the permissions are not getting set for the file.</p>
                    <p>When i try to save a image directly into a bucket (bucketname/first.jpg) , everything is working fine.</p>
                    <p>Im using S3::ACL_PUBLIC_READ for both.</p>
                  </div>
                </div>
              </li>
              <li id="comment-643" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://agentile.com/" rel="external nofollow" title="http://agentile.com/">
                      <img src="http://www.gravatar.com/avatar/a02be3d25177abacda1768e6d3f56cf8?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Anthony Gentile" />
                      <br />
                      <span>Anthony Gentile</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-643" title="Permanent link to this comment">9th Jul 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Just wanted to say thanks for this class and also curious as to if you have plans to update it to manage the recent bucket policy additions to S3. Thanks again.</p>
                  </div>
                </div>
              </li>
              <li id="comment-647">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/6a386f41bb397d1594b1d8b640162615?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="vinod" /><br />vinod</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-647" title="Permanent link to this comment">28th Jul 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hey Bro Thank you very much, among the libraries out there I think yours is the best. Its simple and has nice documentation and example good enough for me...</p>
                  </div>
                </div>
              </li>
              <li id="comment-650" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f57e2cfc69e45b9b29eb700546c69ba2?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Anoop" /><br />Anoop</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-650" title="Permanent link to this comment">12th Aug 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi,</p>
                    <p>I have to transfer my files from amazon s3 to my new sever . My bucket has large number of images and videos. Is it possible to transfer all my files to my new server  using php script ?</p>
                    <p>Thanks in Advance,</p>
                    <p>Anoop</p>
                  </div>
                </div>
              </li>
              <li id="comment-654">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/c69d89cd6fa1f9020c0b42b1b10bf187?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Bruce" /><br />Bruce</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-654" title="Permanent link to this comment">23rd Aug 2010</a>
                  </span>
                </div>
                <div class="comment"></div>
              </li>
              <li id="comment-655" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/f72c49fbd581dd07c090c45deb358182?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Bruce" /><br />Bruce</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-655" title="Permanent link to this comment">23rd Aug 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>When I pass a short string to putObject it takes minutes to complete.  The same data passed in a file completes immediately.</p>
                    <p>Slow:</p>
                    <p>$data = "0123456789\n";</p>
                    <p>$put = $s3-&gt;putObject($data, $bucket, $path, S3::ACL_PUBLIC_READ);</p>
                    <p>Fast:</p>
                    <p>$data = $s3-&gt;inputFile("file.txt");</p>
                    <p>$put = $s3-&gt;putObject($data, $bucket, $path, S3::ACL_PUBLIC_READ);</p>
                  </div>
                </div>
              </li>
              <li id="comment-657">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/71aa36b57e3f91609975d997fb751912?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Andris" /><br />Andris</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-657" title="Permanent link to this comment">28th Aug 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>If ther's a backslash in the path of an object (not a slash which separates folders) then copyObject fails with " The request signature we calculated does not match the signature you provided.". A minor problem, and I'm looking into fixing it, but if anyone has a suggetion... Thanks.</p>
                  </div>
                </div>
              </li>
              <li id="comment-658" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/71aa36b57e3f91609975d997fb751912?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Andris" /><br />Andris</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-658" title="Permanent link to this comment">28th Aug 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I found the solution... You have to urlencode() the object's name</p>
                  </div>
                </div>
              </li>
              <li id="comment-660">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/847de8d1f5f0c8dda1540c385cd6632b?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Jaka" /><br />Jaka</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-660" title="Permanent link to this comment">13th Sep 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>This is really poorly designed.</p>
                    <p>All the objects share a single pair of credentials. They don't behave as you would expect objects to behave at all.</p>
                  </div>
                </div>
              </li>
              <li id="comment-661" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://undesigned.org.za/" rel="external nofollow" title="http://undesigned.org.za/">
                      <img src="http://www.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Don" />
                      <br />
                      <span>Don</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-661" title="Permanent link to this comment">13th Sep 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>@Jaka,</p>
                    <p>Yes - I'm busy with a rewrite that will.  But if you don't like it, use something else :-)</p>
                  </div>
                </div>
              </li>
              <li id="comment-662">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/b96c7f5287a5772d70e21026b418bbb0?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="vince" /><br />vince</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-662" title="Permanent link to this comment">21st Sep 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>I like the profuseness of the comments.</p>
                    <p>But,</p>
                    <p>it seems that this class doesn't support bucket names with capital letters, even though S3 will treat two buckets such as 'SomeBucket' and 'somebucket' as distinct, and will let them coexist as separate entities.</p>
                    <p>If a user tries something like $s3-&gt;putBucket('SomeBucket');</p>
                    <p>a bucket with a name of 'somebucket' will created in S3.</p>
                    <p>If a user has created a bucket with a name of 'SomeBucket' via some other means (like the AWS Management Console), it will be inaccessible with this class.</p>
                  </div>
                </div>
              </li>
              <li id="comment-663" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/14f83a6030520846f471fa1364e1b5c9?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="aaron francis" /><br />aaron francis</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-663" title="Permanent link to this comment">23rd Sep 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>First off, thanks so much for this class. Works like a dream.</p>
                    <p>Quick question though, every time I try to use the prefix option on getBucket I get a SignatureDoesNotMatch error.</p>
                    <p>$contents = $s3-&gt;getBucket("bucket") - works</p>
                    <p>$contents = $s3-&gt;getBucket("bucket", "a"); - error</p>
                    <code>
                      <span class="source-html">Warning: S3::getBucket(): [SignatureDoesNotMatch] The request signature we calculated does not match the signature you provided. Check your key and signing method. in /Applications/MAMP/htdocs/assets/classes/S3.class.php on line 126</span>
                    </code>
                    <p>I've tried urlencoding different things and also sorting headers lexicographically. I just can't seem to get it down. Any ideas?</p>
                  </div>
                </div>
              </li>
              <li id="comment-664">
                <div class="author">
                  <cite>
                    <a href="http://qvaq.com/" rel="external nofollow" title="http://qvaq.com/">
                      <img src="http://www.gravatar.com/avatar/e89c85cc43acbcd9d40d00ca280571ef?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Martin Lindkvist" />
                      <br />
                      <span>Martin Lindkvist</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-664" title="Permanent link to this comment">30th Sep 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>This class is awesome, use it all the time.</p>
                    <p>It would be great if it was updated with the invalidation and default-object features amazon has added lately.</p>
                  </div>
                </div>
              </li>
              <li id="comment-667" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/6742d44d755c95cf3130c8ae33cce350?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="David Bruant" /><br />David Bruant</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-667" title="Permanent link to this comment">18th Oct 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Just to let you know, Amazon has announced a product very similar to yours.</p>
                    <p>http://aws.amazon.com/about-aws/whats-new/2010/09/29/announcing-aws-sdk-for-php/</p>
                  </div>
                </div>
              </li>
              <li id="comment-668">
                <div class="author">
                  <cite>
                    <a href="http://blog.deobald.org/" rel="external nofollow" title="http://blog.deobald.org/">
                      <img src="http://www.gravatar.com/avatar/a9ff706566705fb0a0882915bcabb790?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Dominik" />
                      <br />
                      <span>Dominik</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-668" title="Permanent link to this comment">22nd Oct 2010</a>
                  </span>
                </div>
                <div class="comment"></div>
              </li>
              <li id="comment-671" class="alt">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/1e797ab4ccc02d98a46d9f775ca4e2a8?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="tazododu" /><br />tazododu</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-671" title="Permanent link to this comment">18th Nov 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>since yesterday i get error</p>
                    <p>Warning: S3::getBucket(): [6] Couldn't resolve host 'zakupka-images.s3.amazonaws.com' in /var/www/zakupka.test/oop/amazon_uploader/S3.php on line 136</p>
                    <p>what's wrong?</p>
                  </div>
                </div>
              </li>
              <li id="comment-673">
                <div class="author">
                  <cite><img src="http://www.gravatar.com/avatar/4c921f8866878cd38164c99fd08cc3c4?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Morne" /><br />Morne</cite>
                  <br />
                  <span class="date">
                    <a href="#comment-673" title="Permanent link to this comment">25th Nov 2010</a>
                  </span>
                </div>
                <div class="comment">
                  <div>
                    <p>Hi there, how can I bulk upload files in a directory to my s3 bucket?</p>
                    <p>Can I just get all file names from the directory and put it in to an array, then use the putObject() to upload?</p>
                  </div>
                </div>
              </li>
              <li id="comment-685" class="alt">
                <div class="author">
                  <cite>
                    <a href="http://www.privorot/" rel="external nofollow" title="http://www.privorot/">
                      <img src="http://www.gravatar.com/avatar/0b0506363a11502b90077da398ff2661?s=100&amp;d=http%3A%2F%2Fundesigned.org.za%2Fsrc%2Fimg%2Fuser.png" height="100" width="100" alt="Жаннннн" />
                      <br />
                      <span>Жаннннн</span>
                    </a>
                  </cite>
                  <br />
                  <span class="date">
                    <a href="#comment-685" title="Permanent link to this comment">18th Dec 2010</a>
                  </span>
                </div>
                <div class="comment" id="last-comment">
                  <div>
                    <p>Ангелина Гордеева восстановила мои семейные отношения и вернула мне мою любимую жену, гадание сбывалось в точности, огромное гранд мерси!</p>
                  </div>
                </div>
              </li>
            </ol>
            <form id="comment" action="/2007/10/22/amazon-s3-php-class#comment" method="post">
              <fieldset class="vertical">
                <legend>
                  <span>Leave a comment</span>
                </legend>
                <ol>
                  <li id="commentsName">
                    <label for="commentName">Name <span>(required)</span>: </label>
                    <input id="commentName" type="text" name="name" value="" maxlength="100" />
                    <span class="req">*</span>
                  </li>
                  <li id="commentsEmail">
                    <label for="commentEmail">Email <span>(required, will not be displayed)</span>: </label>
                    <input id="commentEmail" type="text" name="email" value="" maxlength="100" />
                    <span class="req">*</span>
                  </li>
                  <li id="commentsURL">
                    <label for="commentURL">Website <span>(optional)</span>: </label>
                    <input id="commentURL" type="text" name="url" value="" maxlength="200" />
                  </li>
                  <li id="commentsText">
                    <label for="commentText">Message <span>(required)</span>: </label>
                    <textarea id="commentText" name="comment" rows="10" cols="65"></textarea>
                    <span class="req">*</span>
                    <br />
                    <a id="commentsBBCode" href="#bbcode" style="display:none">Show formatting help</a>
                    <span id="commentsBBCodeHelp" style="display:none">
                      <br />
                      <span>[b] bold [/b]</span>
                      <br />
                      <span>[i] italic [/i]</span>
                      <br />
                      <span>[u] underline [/u]</span>
                      <br />
                      <span>[code] code(); [/code]</span>
                      <br />
                      <span>[quote] quotation [/quote]</span>
                      <br />
                      <span>[url="http://google.com/"] url text [/url]</span>
                      <br />
                    </span>
                  </li>
                  <li id="commentsRemember" class="checkbox">
                    <input id="commentRemember" type="checkbox" name="remember" value="1" />
                    <label for="commentRemember"> Remember my details</label>
                  </li>
                  <li class="submit">
                    <input type="submit" value="Post comment" />
                  </li>
                </ol>
              </fieldset>
            </form>
          </div>
          <div id="ui-sidebar">
            <h2>Latest tweets</h2>
            <p>Winter please!&#160;<a href="http://twitter.com/undesigned/statuses/17206248311103489" rel="external">#</a>&#160;<span class="since">Today at 3:14 PM</span></p>
            <p>Melting.&#160;<a href="http://twitter.com/undesigned/statuses/16879202124963840" rel="external">#</a>&#160;<span class="since">Yesterday at 5:34 PM</span></p>
            <p>I truly hate this time of year.&#160;<a href="http://twitter.com/undesigned/statuses/16787053970718720" rel="external">#</a>&#160;<span class="since">Yesterday at 11:28 AM</span></p>
            <h2>Similar Posts</h2>
            <div class="similar-posts">
              <ul>
                <li>
                  <a href="/2009/02/16/wordpress-plugin-for-amazon-s3" rel="bookmark">Wordpress plugin for Amazon S3</a>
                </li>
                <li>
                  <a href="/2009/02/20/php-classes-for-amazon-sqs-and-simpledb" rel="bookmark">PHP classes for Amazon SQS and SimpleDB</a>
                </li>
                <li>
                  <a href="/2008/03/12/imagick" rel="bookmark">Imagick</a>
                </li>
                <li>
                  <a href="/2008/07/06/simple-php-upload-progress-meter-using-prototype" rel="bookmark">Simple PHP upload progress meter using Prototype</a>
                </li>
                <li>
                  <a href="/2009/08/15/updated-documentation-for-the-amazon-s3-php-class" rel="bookmark">Updated documentation for the Amazon S3 PHP class</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="spacer"></div>
        </div>
      </div>
      <div class="framed">
        <div id="ui-foot">
          <p>
            <span class="end"><a href="/">Home</a> | <a href="/blog">Blog</a> | <a href="/about">About</a> | <a href="/contact">Contact</a> | Copyright &#169; Donovan Sch&#246;nknecht</span>
            <a href="#top">Top</a>
          </p>
        </div>
      </div>
    </div>
    <script type="text/javascript" src="/src/cache/squished.js"></script>
    <script type="text/javascript" src="/src/cache/undesigned.js"></script>
    <script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>
  </body>
</html>
<!-- 0.3330 secs (no cache) -->
